
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mixins &mdash; Documentation Sponge 7.2.0</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Index"
              href="../../genindex.html"/>        <link rel="search" title="Recherche" href="../../search.html"/>    <link rel="top" title="Documentation Sponge 7.2.0" href="../../index.html"/>        <link rel="up" title="Développer Sponge" href="index.html"/>        <link rel="next" title="Implémenter des DataManipulators" href="datamanipulator.html"/>        <link rel="prev" title="Foire aux Questions" href="debugging/faq.html"/>
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Créer un Serveur</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Stratégie de versioning</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Préparation pour le développement</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../plugin/index.html">Création d’un Plugin</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Documentation d’Ore</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Contribuer à Sponge</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../guidelines.html">Lignes directrices des contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtogit.html">Comment utiliser Git(Hub)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Développer Sponge</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="codestyle.html">Style de Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="git-implementation.html">Git Workflow pour API et Implémentations</a></li>
<li class="toctree-l3"><a class="reference internal" href="pr.html">Soumettre une Contribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html">Débugger Sponge</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Mixins</a></li>
<li class="toctree-l3"><a class="reference internal" href="datamanipulator.html">Implémenter des DataManipulators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../spongedocs.html">Écrire pour SpongeDocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting.html">Faire un Portage de Sponge vers d’autres Plateformes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html">Organisation des branches du dépôt</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">À propos du Projet Sponge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Contribuer à Sponge</a> &raquo;</li>
          <li><a href="index.html">Développer Sponge</a> &raquo;</li>
    <li>Mixins</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/contributing/implementation/mixins.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="mixins">
<h1>Mixins<a class="headerlink" href="#mixins" title="Lien permanent vers ce titre">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Cette page s’applique à SpongeCommon, SpongeForge et SpongeVanilla puisque ces trois dépôts utilisent les Mixins pour accrocher aux implémentations sous-jacentes (Serveur Minecraft Vanilla et Forge).</p>
</div>
<p>Les Mixins sont une façon de modifier du code java au lancement en ajoutant des comportements additionnels aux classes. Ils permettent d’intégrer des comportements dans des objets Minecraft existants. Les Mixins sont indispensables pour que toutes les implémentations officielles de Sponge fonctionnent.</p>
<p>Une introduction aux principes de base des mixins que nous utilisons pour implémenter Sponge est disponible sur le <a class="reference external" href="https://github.com/SpongePowered/Mixin/wiki/">Wiki Mixin</a></p>
<p><em>Ça commence avec les bases. Si vous êtes un développeur Java expérimenté, n’hésitez pas à passer à la section 4, où l’on parle des mixins.</em></p>
<p>If you’re looking to get started writing mixins, we also strongly recommend carefully examining all of the examples in
the <a class="reference external" href="https://github.com/SpongePowered/SpongeCommon/tree/v7.1.6/src/example">SpongeCommon repository</a> which
are extensively documented and cover many of the more complex scenarios. You should also consult the Javadoc of the Mixin
repository itself, since almost everything is already documented.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Le projet Mixin servira à un grand nombre de projets en plus de Sponge en lui-même. De ce fait, Mixin possède sa propre documentation et le dépôt qui va avec.</p>
</div>
<div class="section" id="mixins-and-inner-classes">
<h2>Mixins et Classes Internes<a class="headerlink" href="#mixins-and-inner-classes" title="Lien permanent vers ce titre">¶</a></h2>
<p>Même si vous pouvez utiliser des lambdas, des classes anonymes et des classes internes dans les mixins, vous ne pouvez pas utiliser de classes anonymes/classes internes dans d’autres classes anonymes/classe interne qui est aussi dans un mixin, à moins que l’une des classes internes ne soit <code class="docutils literal notranslate"><span class="pre">static</span></code>.</p>
<p>Ce qui signifie que les expressions comme la suivante ne conduiront qu’à d’horribles erreurs et apporteront mort et destruction sur tout ce qui tente d’utiliser Sponge.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="k">new</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// THIS WILL NOT WORK!</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="p">()</span> <span class="p">{</span>
                <span class="c1">// Code skipped</span>
            <span class="p">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="n">ItemStack</span> <span class="nf">next</span><span class="p">()</span> <span class="p">{</span>
                <span class="c1">// Code skipped</span>
            <span class="p">}</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="c1">// Other methods skipped</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Cela s’applique à toutes les classes annotées avec <code class="docutils literal notranslate"><span class="pre">&#64;Mixin</span></code>. Les classes qui ne sont pas touchées par le processeur de mixins peuvent utiliser ces fonctionnalités. Il y a quelques moyens de contourner ces limitations.</p>
<p>Une option serait d’utiliser une classe utilitaire supplémentaire, car contrairement à la classe mixin, cette classe utilitaire existera au runtime, alors que votre mixin sera fusionnée dans la classe visée. Le code suivant fonctionnera donc.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleCollection</span> <span class="kd">implements</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">TargetClass</span> <span class="n">target</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">SampleCollection</span><span class="p">(</span><span class="n">TargetClass</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">target</span> <span class="o">=</span> <span class="n">target</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="p">()</span> <span class="p">{</span>
                <span class="c1">// Code skipped</span>
            <span class="p">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="n">ItemStack</span> <span class="nf">next</span><span class="p">()</span> <span class="p">{</span>
                <span class="c1">// Code skipped</span>
            <span class="p">}</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="c1">// Other methods skipped</span>
<span class="p">}</span>

<span class="nd">@Mixin</span><span class="p">(</span><span class="n">TargetClass</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">SomeMixin</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span> <span class="nf">someFunction</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">SampleCollection</span><span class="p">((</span><span class="n">TargetClass</span><span class="p">)</span> <span class="p">(</span><span class="n">Object</span><span class="p">)</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>L’autre option serait de simplement placer toutes les classes internes directement dans le mixin ou dans l’une de ses méthodes, et non pas les unes dans les autres, par exemple:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Mixin</span><span class="p">(</span><span class="n">TargetClass</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">SomeMixin</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">SampleIterator</span> <span class="kd">implements</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span> <span class="p">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// Code skipped</span>
        <span class="p">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">ItemStack</span> <span class="nf">next</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// Code skipped</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span> <span class="nf">someFunction</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">ItemStack</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">SampleIterator</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="c1">// Other methods skipped</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="datamanipulator.html" class="btn btn-neutral float-right" title="Implémenter des DataManipulators" accesskey="n" rel="next">Suivant <span class="fa fa-angle-right"></span></a>
        <a href="debugging/faq.html" class="btn btn-neutral" title="Foire aux Questions" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Précédent</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../../_static/flags/fr_FR.svg"
         alt="fr" title="Français">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/translations.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>