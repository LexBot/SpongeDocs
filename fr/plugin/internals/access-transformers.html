
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Les Access Transformers &mdash; Documentation Sponge 7.2.0</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Index"
              href="../../genindex.html"/>        <link rel="search" title="Recherche" href="../../search.html"/>    <link rel="top" title="Documentation Sponge 7.2.0" href="../../index.html"/>        <link rel="up" title="Plugins dépendants des implémentations" href="index.html"/>        <link rel="next" title="Plugin Mixins" href="mixins.html"/>        <link rel="prev" title="Utiliser MCP dans les Plugins" href="mcp-setup.html"/>
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Créer un Serveur</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Stratégie de versioning</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Préparation pour le développement</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Création d’un Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">Versions de l’API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Mise en Place de votre Espace de Travail</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Configurer Votre Projet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Identifiants de Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Classe Principale du Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Cycle de vie des Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Injection de Dépendances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practices/index.html">Bonnes Pratiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Optionnels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Journalisation (Logging) et Débogage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Commandes de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Événements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Configuration des plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">L’API des Ressources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">La Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Blocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entités</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Effets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Bases de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Collection de Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Views d’un Livre</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Économie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">Génération du monde</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Gestionnaire de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Gestionnaire de Profil de Jeu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Données du Joueur Hors-Ligne</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Debugging d’un plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutoriels</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Plugins dépendants des implémentations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="mcp.html">MCP (Mod Coder Pack)</a></li>
<li class="toctree-l3"><a class="reference internal" href="mcp-setup.html">Utiliser MCP dans les Plugins</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Les Access Transformers</a></li>
<li class="toctree-l3"><a class="reference internal" href="mixins.html">Plugin Mixins</a></li>
<li class="toctree-l3"><a class="reference internal" href="implementation.html">Classes Internes à Sponge</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Documentation d’Ore</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contribuer à Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">À propos du Projet Sponge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Création d’un Plugin</a> &raquo;</li>
          <li><a href="index.html">Plugins dépendants des implémentations</a> &raquo;</li>
    <li>Les Access Transformers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugin/internals/access-transformers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="access-transformers">
<h1>Les Access Transformers<a class="headerlink" href="#access-transformers" title="Lien permanent vers ce titre">¶</a></h1>
<p>Puisque certaines parties du code de Minecraft n’ont pas été créées dans le but d’être utilisées depuis l’extérieur, vous pouvez vous retrouver dans une situation où vous avez besoin d’accéder une variable ou une méthode qui n’est pas publique. Alors que vous voudriez normalement utiliser la Reflection pour accéder à la variable ou la méthode, MCP rendra cela plus difficile puisque vous avez deux noms différents - les noms MCP dans l’environnement de développement et les noms de Searge en production.</p>
<p>Par exemple pour accéder à la méthode <code class="docutils literal notranslate"><span class="pre">tick()</span></code> en utilisant la Reflection, vous auriez besoin d’utiliser <code class="docutils literal notranslate"><span class="pre">tick</span></code> dans l’environnement de développement, mais <code class="docutils literal notranslate"><span class="pre">func_71217_p</span></code> en production. L’étape de ré-obfuscation gère uniquement les références directes aux méthodes et aux variables, pas les paramètres String passés à l’appel de Reflection.</p>
<p>Comme solution, ForgeGradle supporte l’utilisation des Access Transformers (ou AT) qui rendent automatiquement la méthode/variable spécifiée publique pour que vous puissiez les référencer directement (sans Reflection). Alors qu’ils sont principalement destinés pour une utilisation avec le code de base de Minecraft, ils peuvent également être appliqués aux classes d’autres projets. Si configurés dans le manifeste du JAR du plugin, SpongeVanilla et Forge les appliqueront également en production.</p>
<div class="section" id="setup">
<h2>Réglages<a class="headerlink" href="#setup" title="Lien permanent vers ce titre">¶</a></h2>
<p>ForgeGradle va automatiquement chercher pour des fichiers d’Access Transformers avec le suffixe de nom de fichier <code class="docutils literal notranslate"><span class="pre">_at.cfg</span></code> dans vos dossiers de ressources. Pour être en mesure d’utiliser l’Access Transformer au runtime, vous devrez les ajouter dans un dossier <code class="docutils literal notranslate"><span class="pre">META-INF</span></code> dans votre dossier de ressources, par exemple <code class="docutils literal notranslate"><span class="pre">META-INF/myplugin_at.cfg</span></code>.</p>
<p>Il y a 3 différents types d’Access Transformers : Vous pouvez changer les modifiers de classes, de variables et de méthodes. Une ligne d’Access Transformer est définie en 2 parties (pour les classes) ou 3 parties (pour les variables et les méthodes), chacune séparée par un espace.</p>
<ul class="simple">
<li>Le type d’accès avec lequel vous voulez changer la méthode/variable, par exemple <code class="docutils literal notranslate"><span class="pre">public</span></code> ou <code class="docutils literal notranslate"><span class="pre">protected</span></code>. Pour supprimer <code class="docutils literal notranslate"><span class="pre">final</span></code> d’une variable, ajoutez <cite>-f`</cite> après le type d’accès, par exemple <code class="docutils literal notranslate"><span class="pre">public-f</span></code>.</li>
<li>Nom complet de la classe, exemple <code class="docutils literal notranslate"><span class="pre">net.minecraft.server.MinecraftServer</span></code></li>
<li>Pour les variables et les méthodes : Nom de variable Searge ou nom de méthode Searge et signature de méthode, exemple <code class="docutils literal notranslate"><span class="pre">field_54654_a</span></code> ou <code class="docutils literal notranslate"><span class="pre">func_4444_a()V</span></code></li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">Vous pouvez ajouter des commentaires en les préfixant par <code class="docutils literal notranslate"><span class="pre">#</span></code>. Une bonne convention consiste à ajouter le nom MCP après chaque ligne d’Access Transformer afin que vous sachiez à quelle méthode/variable la ligne fait référence.</p>
</div>
<p>Voici deux exemple de lignes d’Access Transformers :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span><span class="o">-</span><span class="n">f</span> <span class="n">net</span><span class="o">.</span><span class="n">minecraft</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">MinecraftServer</span> <span class="n">field_71308_o</span> <span class="c1"># anvilFile</span>
<span class="n">public</span> <span class="n">net</span><span class="o">.</span><span class="n">minecraft</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">MinecraftServer</span> <span class="n">func_71260_j</span><span class="p">()</span><span class="n">V</span> <span class="c1"># stopServer</span>
<span class="n">public</span><span class="o">-</span><span class="n">f</span> <span class="n">net</span><span class="o">.</span><span class="n">minecraft</span><span class="o">.</span><span class="n">item</span><span class="o">.</span><span class="n">ItemStack</span>
</pre></div>
</div>
<p>Pour appliquer les Access Transformers à votre environnement de développement, exécutez la tâche Gradle <code class="docutils literal notranslate"><span class="pre">setupDecompWorkspace</span></code> de nouveau et actualisez votre projet Gradle :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gradle setupDecompWorkspace
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">Vous pouvez utiliser le <a class="reference external" href="http://mcpbot.bspk.rs/help">MCP bot</a> qui est présent dans les salons IRC MCP et Sponge, ou le salon <code class="docutils literal notranslate"><span class="pre">#bot-spam</span></code> sur Discord pour obtenir rapidement la ligne d’Access Transformer pour une variable ou une méthode. Après avoir regardé une méthode à l’aide de <code class="docutils literal notranslate"><span class="pre">!gm</span> <span class="pre">&lt;mcp</span> <span class="pre">method</span> <span class="pre">name&gt;</span></code> ou une variable en utilisant <code class="docutils literal notranslate"><span class="pre">!gf</span> <span class="pre">&lt;mcp</span> <span class="pre">field</span> <span class="pre">name&gt;</span></code>, il suffit de copier la ligne listée <code class="docutils literal notranslate"><span class="pre">AT</span></code> dans votre fichier d’Access Transformer.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Rendre une variable/méthode moins accessible (exemple <code class="docutils literal notranslate"><span class="pre">public</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">private</span></code>) n’est pas supporté.</p>
</div>
<div class="section" id="production">
<h3>Production<a class="headerlink" href="#production" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour appliquer les Access Transformers en production, vous devez ajouter une entrée manifest <code class="docutils literal notranslate"><span class="pre">FMLAT</span></code> à votre plugin avec le nom du fichier de votre Access Transformer dans le dossier `` META-INF``.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">jar</span> <span class="o">{</span>
    <span class="n">manifest</span><span class="o">.</span><span class="na">attributes</span><span class="o">(</span><span class="s1">&#39;FMLAT&#39;</span><span class="o">:</span> <span class="s1">&#39;myplugin_at.cfg&#39;</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="mixins.html" class="btn btn-neutral float-right" title="Plugin Mixins" accesskey="n" rel="next">Suivant <span class="fa fa-angle-right"></span></a>
        <a href="mcp-setup.html" class="btn btn-neutral" title="Utiliser MCP dans les Plugins" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Précédent</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../../_static/flags/fr_FR.svg"
         alt="fr" title="Français">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/translations.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>