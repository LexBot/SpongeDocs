
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plugin Mixins &mdash; Documentation Sponge 7.2.0</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Index"
              href="../../genindex.html"/>        <link rel="search" title="Recherche" href="../../search.html"/>    <link rel="top" title="Documentation Sponge 7.2.0" href="../../index.html"/>        <link rel="up" title="Plugins dépendants des implémentations" href="index.html"/>        <link rel="next" title="Classes Internes à Sponge" href="implementation.html"/>        <link rel="prev" title="Les Access Transformers" href="access-transformers.html"/>
    <!-- Google Analytics -->
    <script>
        (function(S,p,o,n,g,i,e){S['GoogleAnalyticsObject']=g;S[g]=S[g]||function(){
        (S[g].q=S[g].q||[]).push(arguments)},S[g].l=1*new Date();i=p.createElement(o),
        e=p.getElementsByTagName(o)[0];i.async=1;i.src=n;e.parentNode.insertBefore(i,e)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59476017-2', 'auto');
        ga('send', 'pageview');
    </script>

  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Créer un Serveur</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Stratégie de versioning</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Préparation pour le développement</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Création d’un Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">Versions de l’API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Mise en Place de votre Espace de Travail</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Configurer Votre Projet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Identifiants de Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Classe Principale du Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Cycle de vie des Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Injection de Dépendances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practices/index.html">Bonnes Pratiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Optionnels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Journalisation (Logging) et Débogage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Commandes de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Événements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Configuration des plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">L’API des Ressources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">La Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Blocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entités</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Effets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Bases de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Collection de Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Views d’un Livre</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Économie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">Génération du monde</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Gestionnaire de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Gestionnaire de Profil de Jeu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Données du Joueur Hors-Ligne</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Debugging d’un plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutoriels</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Plugins dépendants des implémentations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="mcp.html">MCP (Mod Coder Pack)</a></li>
<li class="toctree-l3"><a class="reference internal" href="mcp-setup.html">Utiliser MCP dans les Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="access-transformers.html">Les Access Transformers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Plugin Mixins</a></li>
<li class="toctree-l3"><a class="reference internal" href="implementation.html">Classes Internes à Sponge</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Documentation d’Ore</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contribuer à Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">À propos du Projet Sponge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Création d’un Plugin</a> &raquo;</li>
          <li><a href="index.html">Plugins dépendants des implémentations</a> &raquo;</li>
    <li>Plugin Mixins</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugin/internals/mixins.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="plugin-mixins">
<h1>Plugin Mixins<a class="headerlink" href="#plugin-mixins" title="Lien permanent vers ce titre">¶</a></h1>
<p>Les <a class="reference external" href="https://github.com/SpongePowered/Mixin">Mixins</a> peuvent être utilisés pour modifier des classes au runtime avant qu’elles ne soient chargées. Vous pouvez les utiliser dans les plugins si vous voulez optimiser une partie du jeu spécifiquement pour votre serveur - sans avoir à faire un fork de Sponge. Les modifications seront regroupées directement avec votre plugin et seront seulement actives tant que le plugin sera chargé.</p>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<dl class="last docutils">
<dt><a class="reference external" href="https://github.com/SpongePowered/Mixin/wiki">Documentation des Mixins</a></dt>
<dd>La documentation des Mixins inclue une introduction aux Mixins.</dd>
<dt><a class="reference external" href="https://github.com/SpongePowered/Cookbook/tree/master/Plugin/PluginMixinTest">Plugin Exemple</a></dt>
<dd>Plugin d’exemple qui utilise les Plugin Mixins pour afficher un message lorsque le serveur démarre.</dd>
</dl>
</div>
<div class="section" id="setup">
<h2>Réglages<a class="headerlink" href="#setup" title="Lien permanent vers ce titre">¶</a></h2>
<ol class="arabic">
<li><p class="first">Ajoutez la librairie Mixin comme dépendance à votre plugin :</p>
<blockquote>
<div><div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s1">&#39;org.spongepowered:mixin:0.7.11-SNAPSHOT&#39;</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Ajoutez une nouvelle configuration de Mixin à votre plugin, exemple <code class="docutils literal notranslate"><span class="pre">mixins.myplugin.json</span></code> dans votre dossier ressources :</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;minVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;0.7.10&quot;</span><span class="p">,</span>
    <span class="nt">&quot;package&quot;</span><span class="p">:</span> <span class="s2">&quot;com.example.myplugin.mixin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;refmap&quot;</span><span class="p">:</span> <span class="s2">&quot;mixins.myplugin.refmap.json&quot;</span><span class="p">,</span>
    <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;@env(DEFAULT)&quot;</span><span class="p">,</span>
    <span class="nt">&quot;compatibilityLevel&quot;</span><span class="p">:</span> <span class="s2">&quot;JAVA_8&quot;</span><span class="p">,</span>
    <span class="nt">&quot;mixins&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;MixinMinecraftServer&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Ajoutez une classeM ixin au package spécifié :</p>
<blockquote>
<div><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.myplugin.mixin</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">net.minecraft.server.MinecraftServer</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.asm.mixin.Mixin</span><span class="p">;</span>

<span class="nd">@Mixin</span><span class="p">(</span><span class="n">MinecraftServer</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">MixinMinecraftServer</span> <span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="section" id="debugging">
<h3>Debugging<a class="headerlink" href="#debugging" title="Lien permanent vers ce titre">¶</a></h3>
<p>Normalement, la configuration Mixin est enregistré à l’intérieur du manifeste du JAR du plugin. Puisque le plugin n’est pas mis dans un JAR lors du debugging à l’intérieur de l’IDE vous devez spécifier les Mixins à appliquer avec une option de ligne de commande :</p>
<ol class="arabic">
<li><p class="first">Ajoutez une option <code class="docutils literal notranslate"><span class="pre">--mixin</span> <span class="pre">&lt;mixin</span> <span class="pre">config</span> <span class="pre">file</span> <span class="pre">name&gt;</span></code> pour chaque fichier de configuration Mixin dans les arguments du programme de votre configuration de démarrage :</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--mixin mixins.myplugin.json
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="production">
<h3>Production<a class="headerlink" href="#production" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si votre Mixin fonctionne dans votre environnement de développement, vous devrez quand même faire quelques modifications pour le faire fonctionner en production :</p>
<ol class="arabic">
<li><p class="first">Appliquez le plugin <a class="reference external" href="https://github.com/SpongePowered/MixinGradle">MixinGradle</a> à votre script de build :</p>
<blockquote>
<div><div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">buildscript</span> <span class="o">{</span>
    <span class="n">repositories</span> <span class="o">{</span>
        <span class="n">maven</span> <span class="o">{</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;sponge&#39;</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://repo.spongepowered.org/maven&#39;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">dependencies</span> <span class="o">{</span>
        <span class="n">classpath</span> <span class="s1">&#39;org.spongepowered:mixingradle:0.6-SNAPSHOT&#39;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">&#39;org.spongepowered.mixin&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Définissez la refmap depuis votre configuration Mixin :</p>
<blockquote>
<div><div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">sourceSets</span> <span class="o">{</span>
    <span class="n">main</span> <span class="o">{</span>
        <span class="n">ext</span><span class="o">.</span><span class="na">refMap</span> <span class="o">=</span> <span class="s2">&quot;mixins.myplugin.refmap.json&quot;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Ajoutez votre configuration Mixin au manifeste du JAR. L’entrée manifeste <code class="docutils literal notranslate"><span class="pre">FMLCorePluginContainsFMLMod</span></code> est nécessaire si vous voulez charger votre Mixin sur SpongeForge :</p>
<blockquote>
<div><div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">jar</span> <span class="o">{</span>
    <span class="n">manifest</span><span class="o">.</span><span class="na">attributes</span><span class="o">(</span>
        <span class="s1">&#39;TweakClass&#39;</span><span class="o">:</span> <span class="s1">&#39;org.spongepowered.asm.launch.MixinTweaker&#39;</span><span class="o">,</span>
        <span class="s1">&#39;MixinConfigs&#39;</span><span class="o">:</span> <span class="s1">&#39;mixins.myplugin.json&#39;</span><span class="o">,</span>
        <span class="s1">&#39;FMLCorePluginContainsFMLMod&#39;</span><span class="o">:</span> <span class="s1">&#39;true&#39;</span><span class="o">,</span>
    <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Assurez-vous de re-build le plugin en utilisant Gradle. Le Mixin devrait maintenant être appliqué par SpongeVanilla et SpongeForge.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gradle clean build
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="implementation.html" class="btn btn-neutral float-right" title="Classes Internes à Sponge" accesskey="n" rel="next">Suivant <span class="fa fa-angle-right"></span></a>
        <a href="access-transformers.html" class="btn btn-neutral" title="Les Access Transformers" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Précédent</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../../_static/flags/fr_FR.svg"
         alt="fr" title="Français">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/translations.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>