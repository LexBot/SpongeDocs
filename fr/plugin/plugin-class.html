
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Classe Principale du Plugin &mdash; Documentation Sponge 7.2.0</title>

    <link rel="shortcut icon" href="../_static/favicon.ico"/>




    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Index"
              href="../genindex.html"/>        <link rel="search" title="Recherche" href="../search.html"/>    <link rel="top" title="Documentation Sponge 7.2.0" href="../index.html"/>        <link rel="up" title="Création d’un Plugin" href="index.html"/>        <link rel="next" title="Cycle de vie des Plugins" href="lifecycle.html"/>        <link rel="prev" title="Identifiants de Plugins" href="plugin-identifier.html"/>
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../index.html">
            <img src="../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../server/index.html">Créer un Serveur</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../versions/index.html">Stratégie de versioning</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../preparing/index.html">Préparation pour le développement</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Création d’un Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api-versions.html">Versions de l’API</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="workspace/index.html">Mise en Place de votre Espace de Travail</a></li>
<li class="toctree-l2"><a class="reference internal" href="project/index.html">Configurer Votre Projet</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin-identifier.html">Identifiants de Plugins</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Classe Principale du Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifecycle.html">Cycle de vie des Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="injection.html">Injection de Dépendances</a></li>
<li class="toctree-l2"><a class="reference internal" href="practices/index.html">Bonnes Pratiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="optional/index.html">Optionnels</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Journalisation (Logging) et Débogage</a></li>
<li class="toctree-l2"><a class="reference internal" href="text/index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/index.html">Commandes de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="event/index.html">Événements</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/index.html">Configuration des plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="assets.html">L’API des Ressources</a></li>
<li class="toctree-l2"><a class="reference internal" href="data/index.html">La Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="blocks/index.html">Blocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="entities/index.html">Entités</a></li>
<li class="toctree-l2"><a class="reference internal" href="items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="effects.html">Effets</a></li>
<li class="toctree-l2"><a class="reference internal" href="scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">Bases de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html">Collection de Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="bookview.html">Views d’un Livre</a></li>
<li class="toctree-l2"><a class="reference internal" href="economy/index.html">Économie</a></li>
<li class="toctree-l2"><a class="reference internal" href="wgen/index.html">Génération du monde</a></li>
<li class="toctree-l2"><a class="reference internal" href="manager.html">Gestionnaire de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="game-profile-manager.html">Gestionnaire de Profil de Jeu</a></li>
<li class="toctree-l2"><a class="reference internal" href="offline-userplayer-data.html">Données du Joueur Hors-Ligne</a></li>
<li class="toctree-l2"><a class="reference internal" href="tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging d’un plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html">Tutoriels</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals/index.html">Plugins dépendants des implémentations</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ore/index.html">Documentation d’Ore</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contribuer à Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">À propos du Projet Sponge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
          <li><a href="index.html">Création d’un Plugin</a> &raquo;</li>
    <li>Classe Principale du Plugin</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/plugin/plugin-class.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="main-plugin-class">
<h1>Classe Principale du Plugin<a class="headerlink" href="#main-plugin-class" title="Lien permanent vers ce titre">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les instructions dans la documentation de Sponge suppose que vous avez des connaissances préalables en Java. SpongeAPI vous fournit les bases pour commencer à créer des plugins pour les serveurs Minecraft utilisant Sponge; en revanche, c’est à vous d’être créatif et de faire en sorte que votre code fonctionne ! Il existe plusieurs cours de Java, en ligne et gratuit, si vous avez peu d’expérience avec Java.</p>
</div>
<div class="section" id="starting-your-class">
<h2>Commencer votre Classe<a class="headerlink" href="#starting-your-class" title="Lien permanent vers ce titre">¶</a></h2>
<p>La prochaine étape après avoir ajouté SpongeAPI comme dépendance, est la création d’une nouvelle classe. La classe peut être appelée comme bon vous semble, et mise dans n’importe quel package <strong>ne</strong> commençant <strong>pas</strong> par <code class="docutils literal notranslate"><span class="pre">org.spongepowered</span></code>. Par convention, les noms de classe doivent être écrit en CamelCase (la première lettre de chaque mot est une majuscule).</p>
<p>Oracle <a class="reference external" href="https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html">recommande</a> d’utiliser votre nom de domaine comme nom pour vos packages, si vous possédez un nom de domaine. Cependant, dans l’éventualité où vous ne posséderiez pas de nom de domaine, une pratique courante est d’utiliser une adresse email (par exemple <code class="docutils literal notranslate"><span class="pre">com.gmail.username.project</span></code>) ou un dépôt open-source (comme <code class="docutils literal notranslate"><span class="pre">io.github.username.project</span></code>).</p>
<p>Après avoir créé votre classe principale, l’annotation <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/plugin/Plugin.html">Plugin</a> doit lui être apposée. Cette annotation permet à Sponge de facilement retrouver la classe principale de votre plugin, lorsque celui-ci est chargé. Un exemple d’utilisation est présenté ci-dessous, une utilisation plus détaillée est expliqué dans <a class="reference internal" href="plugin-meta.html"><span class="doc">Plugin Metadata</span></a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">io.github.username.project</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.spongepowered.api.plugin.Plugin</span><span class="p">;</span>

<span class="nd">@Plugin</span><span class="p">(</span><span class="n">id</span> <span class="o">=</span> <span class="s">&quot;exampleplugin&quot;</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Example Plugin&quot;</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="s">&quot;1.0&quot;</span><span class="p">,</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&quot;Example&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExamplePlugin</span> <span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Voir <a class="reference internal" href="plugin-identifier.html"><span class="doc">Identifiants de Plugins</span></a> si vous n’avez pas encore choisi votre plugin ID.</p>
</div>
</div>
<div class="section" id="initializing-your-plugin">
<h2>Initialiser votre Plugin<a class="headerlink" href="#initializing-your-plugin" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les plugins sont chargés avant le jeu et les mondes. Ce qui laisse un petit moment pendant lequel votre plugin peut interagir avec le jeu, en enregistrant des commandes ou des events par exemple.</p>
<p>Votre plugin peut écouter un événement particulier, appelé <strong>state events</strong> (événements d’état), afin d’être informé des changements d’état du jeu. Dans l’exemple qui suit, la méthode <code class="docutils literal notranslate"><span class="pre">onServerStart()</span></code> est appelée quand l’événement <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GameStartedServerEvent.html">GameStartedServerEvent</a> se produit; Prenez note de l’annotation <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/Listener.html">Listener</a> se trouvant avant la méthode.</p>
<p>L’exemple ci-desssous va log un mesage lors du démarrage du serveur. Si votre plugin est chargé correctement, vous devriez voir ce message dans la sortie lors de l’initialisation du serveur.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.plugin.Plugin</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.event.Listener</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.event.game.state.GameStartedServerEvent</span><span class="p">;</span>

<span class="c1">// Imports for logger</span>
<span class="kn">import</span> <span class="nn">com.google.inject.Inject</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="p">;</span>

<span class="nd">@Plugin</span><span class="p">(</span><span class="n">id</span> <span class="o">=</span> <span class="s">&quot;exampleplugin&quot;</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Example Plugin&quot;</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="s">&quot;1.0&quot;</span><span class="p">,</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&quot;Example&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExamplePlugin</span> <span class="p">{</span>

    <span class="nd">@Inject</span>
    <span class="kd">private</span> <span class="n">Logger</span> <span class="n">logger</span><span class="p">;</span>

    <span class="nd">@Listener</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onServerStart</span><span class="p">(</span><span class="n">GameStartedServerEvent</span> <span class="n">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">logger</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Successfully running ExamplePlugin!!!&quot;</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">La documentation Sponge fournit un guide avec plus d’informations sur les événements (voir <a class="reference internal" href="event/index.html"><span class="doc">Événements</span></a>). Normalement, en plus d’ajouter un préfixe à la méthode gérant l’événement avec l’annotation <code class="docutils literal notranslate"><span class="pre">&#64;Listener</span></code>, vous devez également enregistrer votre objet auprès du gestionnaire d’événement de Sponge. Toutefois, la classe principale de votre plugin est déjà enregistrée automatiquement.</p>
</div>
<div class="section" id="state-events">
<h3>Événements d’état<a class="headerlink" href="#state-events" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il peut être également souhaitable d’écouter d’autres événements d’état, en particulier l’événement <code class="docutils literal notranslate"><span class="pre">GameStoppingServerEvent</span></code>. Il y a deux catégories d’événements d’état:</p>
<ul class="simple">
<li><strong>Initialization</strong>: Ces événements se produisent lorsque Sponge et les plugins sont en train de se charger.<ul>
<li><a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GameConstructionEvent.html">GameConstructionEvent</a></li>
<li><a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GamePreInitializationEvent.html">GamePreInitializationEvent</a></li>
<li><a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GameInitializationEvent.html">GameInitializationEvent</a></li>
<li><a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GamePostInitializationEvent.html">GamePostInitializationEvent</a></li>
<li><a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GameLoadCompleteEvent.html">GameLoadCompleteEvent</a></li>
</ul>
</li>
<li><strong>Running</strong>: Ces événements se produisent lorsque le jeu et le monde sont en train de se charger.<ul>
<li><a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GameAboutToStartServerEvent.html">GameAboutToStartServerEvent</a></li>
<li><a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GameStartingServerEvent.html">GameStartingServerEvent</a></li>
<li><a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GameStartedServerEvent.html">GameStartedServerEvent</a></li>
<li><a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GameStoppingServerEvent.html">GameStoppingServerEvent</a></li>
<li><a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/event/game/state/GameStoppedServerEvent.html">GameStoppedServerEvent</a></li>
</ul>
</li>
</ul>
<p>Pour toute information concernant chaque événement d’état, voir la <a class="reference internal" href="lifecycle.html"><span class="doc">documentation sur le cycle de vie des plugins</span></a>.</p>
</div>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="lifecycle.html" class="btn btn-neutral float-right" title="Cycle de vie des Plugins" accesskey="n" rel="next">Suivant <span class="fa fa-angle-right"></span></a>
        <a href="plugin-identifier.html" class="btn btn-neutral" title="Identifiants de Plugins" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Précédent</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../_static/flags/fr_FR.svg"
         alt="fr" title="Français">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../_static/jquery.js"></script>      <script type="text/javascript" src="../_static/underscore.js"></script>      <script type="text/javascript" src="../_static/doctools.js"></script>      <script type="text/javascript" src="../_static/language_data.js"></script>      <script type="text/javascript" src="../_static/translations.js"></script>      <script type="text/javascript" src="../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>