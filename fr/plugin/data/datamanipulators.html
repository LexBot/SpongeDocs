
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manipulateurs de données &mdash; Documentation Sponge 7.2.0</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Index"
              href="../../genindex.html"/>        <link rel="search" title="Recherche" href="../../search.html"/>    <link rel="top" title="Documentation Sponge 7.2.0" href="../../index.html"/>        <link rel="up" title="La Data API" href="index.html"/>        <link rel="next" title="Transactions" href="transactions.html"/>        <link rel="prev" title="Utilisation des Clés" href="keys.html"/>
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Créer un Serveur</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Stratégie de versioning</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Préparation pour le développement</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Création d’un Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">Versions de l’API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Mise en Place de votre Espace de Travail</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Configurer Votre Projet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Identifiants de Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Classe Principale du Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Cycle de vie des Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Injection de Dépendances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practices/index.html">Bonnes Pratiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Optionnels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Journalisation (Logging) et Débogage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Commandes de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Événements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Configuration des plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">L’API des Ressources</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">La Data API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="custom/index.html">Données Customisées</a></li>
<li class="toctree-l3"><a class="reference internal" href="catalog-types.html">Catalog Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="keys.html">Utilisation des Clés</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Manipulateurs de données</a></li>
<li class="toctree-l3"><a class="reference internal" href="transactions.html">Transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="serialization.html">Sérialisation de données</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Blocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entités</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Effets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Bases de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Collection de Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Views d’un Livre</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Économie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">Génération du monde</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Gestionnaire de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Gestionnaire de Profil de Jeu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Données du Joueur Hors-Ligne</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Debugging d’un plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutoriels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/index.html">Plugins dépendants des implémentations</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Documentation d’Ore</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contribuer à Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">À propos du Projet Sponge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Création d’un Plugin</a> &raquo;</li>
          <li><a href="index.html">La Data API</a> &raquo;</li>
    <li>Manipulateurs de données</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugin/data/datamanipulators.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="data-manipulators">
<h1>Manipulateurs de données<a class="headerlink" href="#data-manipulators" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="accessing-and-modifying-data">
<h2>Accéder aux données et les modifier<a class="headerlink" href="#accessing-and-modifying-data" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un manipulateur de données représente un certain composant et toutes ses données. Il stocke une représentation des données et peut être offert ou créé à partir d’un data holder qui possède un composant correspondant. Encore une fois, nous allons utiliser un exemple. Et un fois de plus, nous allons essayer de soigner quelqu’un (ou quelque chose).</p>
<p><strong>Exemple: Soigner avec les manipulateurs de données</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.data.DataHolder</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.data.DataTransactionResult</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.data.manipulator.mutable.entity.HealthData</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.data.value.mutable.MutableBoundedValue</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">heal</span><span class="p">(</span><span class="n">DataHolder</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">HealthData</span><span class="o">&gt;</span> <span class="n">healthOptional</span> <span class="o">=</span> <span class="n">target</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">HealthData</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">healthOptional</span><span class="p">.</span><span class="na">isPresent</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">HealthData</span> <span class="n">healthData</span> <span class="o">=</span> <span class="n">healthOptional</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>

        <span class="kt">double</span> <span class="n">maxHealth</span> <span class="o">=</span> <span class="n">healthData</span><span class="p">.</span><span class="na">maxHealth</span><span class="p">().</span><span class="na">get</span><span class="p">();</span>
        <span class="n">MutableBoundedValue</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">currentHealth</span> <span class="o">=</span> <span class="n">healthData</span><span class="p">.</span><span class="na">health</span><span class="p">();</span>
        <span class="n">currentHealth</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">maxHealth</span><span class="p">);</span>
        <span class="n">healthData</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">currentHealth</span><span class="p">);</span>

        <span class="n">target</span><span class="p">.</span><span class="na">offer</span><span class="p">(</span><span class="n">healthData</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>D’abord, nous avons besoin de vérifier ci notre cible a des données sur la santé. Nous le ferons en lui demandant d’abord de nous fournir ses données de santé en lui passant sa classe à la méthode <code class="docutils literal notranslate"><span class="pre">get()</span></code>. Nous récupérons un <code class="docutils literal notranslate"><span class="pre">Optional</span></code> que nous pouvons utiliser pour notre vérification. Cet <code class="docutils literal notranslate"><span class="pre">Optional</span></code> sera absent si notre cible ne supporte pas <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/mutable/entity/HealthData.html">HealthData</a> ou si elle le supporte mais à l’heure actuelle ne détient aucune donnée de santé.</p>
<p>Si les données de santé sont présentes, elles contiennent maintenant une copie mutable des données présentes dans le data holder. Nous faisons nos retouches et rendons finalement les données changées à notre cible, où elle est acceptée (encore, <code class="docutils literal notranslate"><span class="pre">offer()</span></code> va retourner un <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/DataTransactionResult.html">DataTransactionResult</a> que nous allons ne pas tenir compte dans cet exemple et y revenir <a class="reference internal" href="transactions.html"><span class="doc">plus tard</span></a>).</p>
<p>Comme vous pouvez le voir, les résultats pour <code class="docutils literal notranslate"><span class="pre">health()</span></code> et <code class="docutils literal notranslate"><span class="pre">maxHealth()</span></code> sont encore des valeurs clés qu’on obtient du <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/DataHolder.html">DataHolder</a>. Comme le <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/value/mutable/MutableBoundedValue.html">MutableBoundedValue</a> que nous recevons en appelant <code class="docutils literal notranslate"><span class="pre">health()</span></code> contient encore seulement une copie des données, nous avons d’abord besoin d’appliquer nos changements au <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/DataManipulator.html">DataManipulator</a> avant que nous puissions offrir le <code class="docutils literal notranslate"><span class="pre">healthData</span></code> à notre cible.</p>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">Règle #1 de l’API de données : Tout ce que vous recevez est une copie. Donc à chaque fois que vous modifiez quelque chose, assurez-vous que vos changements sont retournés à l’endroit d’où la valeur d’origine venait.</p>
</div>
<p>Une autre modification possible est d’enlever complètement un <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code>. Cela se fait via la méthode <code class="docutils literal notranslate"><span class="pre">remove()</span></code> qui accepte une référence de classe pour le type de <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> à supprimer. Certaines données ne peuvent pas être supprimées et les tentatives pour le faire retourneront toujours un <code class="docutils literal notranslate"><span class="pre">DataTransactionResult</span></code> indiquant un échec. Le code suivant tente de supprimer un custom name d’un <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> donné. Encore une fois, le résultat de la transaction est ignoré.</p>
<p><strong>Exemple de Code : Supprimer un display name personnalisé</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.data.manipulator.mutable.DisplayNameData</span><span class="p">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">removeName</span><span class="p">(</span><span class="n">DataHolder</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">target</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">DisplayNameData</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="datamanipulator-vs-keys">
<h2>DataManipulator vs. Keys<a class="headerlink" href="#datamanipulator-vs-keys" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si vous avez comparé les deux exemples de guérison, vous pouvez vous demander «&nbsp;Pourquoi s’embêter avec les data manipulators, les keys sont bien plus simples” et avoir raison - pour obtenir et définir les valeurs uniques. Mais le vrai mérite d’un data manipulator est qu’il contient <em>toutes</em> les données se rapportant à un certain composant. Prenons un autre exemple.</p>
<p><strong>Exemple de Code : Échanger la santé de deux data holders</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">swapHealth</span><span class="p">(</span><span class="n">DataHolder</span> <span class="n">targetA</span><span class="p">,</span> <span class="n">DataHolder</span> <span class="n">targetB</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">targetA</span><span class="p">.</span><span class="na">supports</span><span class="p">(</span><span class="n">HealthData</span><span class="p">.</span><span class="na">class</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">targetB</span><span class="p">.</span><span class="na">supports</span><span class="p">(</span><span class="n">HealthData</span><span class="p">.</span><span class="na">class</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">HealthData</span> <span class="n">healthA</span> <span class="o">=</span> <span class="n">targetA</span><span class="p">.</span><span class="na">getOrCreate</span><span class="p">(</span><span class="n">HealthData</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
        <span class="n">HealthData</span> <span class="n">healthB</span> <span class="o">=</span> <span class="n">targetB</span><span class="p">.</span><span class="na">getOrCreate</span><span class="p">(</span><span class="n">HealthData</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
        <span class="n">targetA</span><span class="p">.</span><span class="na">offer</span><span class="p">(</span><span class="n">healthB</span><span class="p">);</span>
        <span class="n">targetB</span><span class="p">.</span><span class="na">offer</span><span class="p">(</span><span class="n">healthA</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Tout d’abord, nous vérifions si les deux cibles supportent HealthData. Si c’est le cas, nous enregistrons la santé des deux dans une variable chacune. Nous n’avons pas besoin de nous ennuyer avec les <code class="docutils literal notranslate"><span class="pre">Optional</span></code> cette fois puisque nous avons vérifié que le <code class="docutils literal notranslate"><span class="pre">HealthData</span></code> est supporté et que la méthode <code class="docutils literal notranslate"><span class="pre">getOrCreate()</span></code> garantit que même si aucune donnée n’est présente, des valeurs par défaut sont générées.</p>
<p>Puis nous offrons simplement les données de santé sauvegardées aux <em>autres</em> cibles, donc en changeant leur état de santé entre eux.</p>
<p>Cet exemple fait avec des <code class="docutils literal notranslate"><span class="pre">Keys</span></code> aurait été un peu plus long et plus compliqué car il faudrait prendre soin de chaque clé individuelle par nous-mêmes. Et si à la place de la santé nous avions échangé un autre data manipulator contenant encore plus de données (peut-être <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/mutable/entity/InvisibilityData.html">InvisibilityData</a> qui contient même une liste), nous aurions eu plus de travail à faire. Mais puisque le data holder prend lui-même sui de toutes les données se rapportant à lui, nous pourrions même modifier la function ci-dessus pour échanger les données arbitraires entre deux holders.</p>
<p><strong>Exemple de Code : Échanger des data manipulators</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.data.manipulator.DataManipulator</span><span class="p">;</span>

<span class="kd">public</span>  <span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">DataManipulator</span><span class="o">&lt;?</span><span class="p">,</span><span class="o">?&gt;&gt;</span> <span class="kt">void</span> <span class="nf">swapData</span><span class="p">(</span><span class="n">DataHolder</span> <span class="n">targetA</span><span class="p">,</span> <span class="n">DataHolder</span> <span class="n">targetB</span><span class="p">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">dataClass</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">targetA</span><span class="p">.</span><span class="na">supports</span><span class="p">(</span><span class="n">dataClass</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">targetB</span><span class="p">.</span><span class="na">supports</span><span class="p">(</span><span class="n">dataClass</span><span class="p">))</span> <span class="p">{</span>
       <span class="n">T</span> <span class="n">dataA</span> <span class="o">=</span> <span class="n">targetA</span><span class="p">.</span><span class="na">getOrCreate</span><span class="p">(</span><span class="n">dataClass</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
       <span class="n">T</span> <span class="n">dataB</span> <span class="o">=</span> <span class="n">targetB</span><span class="p">.</span><span class="na">getOrCreate</span><span class="p">(</span><span class="n">dataClass</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
       <span class="n">targetA</span><span class="p">.</span><span class="na">offer</span><span class="p">(</span><span class="n">dataB</span><span class="p">);</span>
       <span class="n">targetB</span><span class="p">.</span><span class="na">offer</span><span class="p">(</span><span class="n">dataA</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>L’abilité d’écrire une fonction qui peut simplement échanger n’importe quelles données d’un data holder avec les mêmes données sur un autre data holder démontre l’objectif de design principale de l’API de données : Une compatibilité maximale dans l’ensemble de l’API.</p>
</div>
<div class="section" id="mutable-vs-immutable-data-manipulators">
<h2>Data Manipulators Mutables vs. Immuables<a class="headerlink" href="#mutable-vs-immutable-data-manipulators" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour chaque data manipulator, il y a un <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/ImmutableDataManipulator.html">ImmutableDataManipulator</a> correspondant. Par exemple, le <code class="docutils literal notranslate"><span class="pre">HealthData</span></code> et le <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/immutable/entity/ImmutableHealthData.html">ImmutableHealthData</a> contiennent les mêmes données, seulement, le dernier retourne de nouvelles instances lors de requêtes de données modifiées.</p>
<p>La conversion entre les data manipulators mutables et immuables se fait via les méthodes <code class="docutils literal notranslate"><span class="pre">asImmutable()</span></code> et <code class="docutils literal notranslate"><span class="pre">asMutable()</span></code>, qui renvoient chacun une copie des données. La seule façon d’obtenir un data manipulator immuable depuis un data holder est d’en obtenir un qui est mutable et puis d’utiliser <code class="docutils literal notranslate"><span class="pre">asImmutable()</span></code>.</p>
<p>Un possible cas d’utilisation pour ceci serait un événement personnalisé appelé lorsqu’un joueur est guéri. Il devrait fournir des copies des données sur la santé d’avant et d’après, mais les events listeners ne devraient pas pouvoir les modifier. Par conséquent, nous pouvons écrire notre événemnt pour fournir uniquement des instances de <code class="docutils literal notranslate"><span class="pre">ImmutableHealthData</span></code>. De cette façon, même si un code tiers peut interagir avec nos données, nous pouvons être assurés qu’elles ne seront pas modifiées.</p>
</div>
<div class="section" id="absent-data">
<h2>Données Absentes<a class="headerlink" href="#absent-data" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme mentionné ci-dessus, la méthode <code class="docutils literal notranslate"><span class="pre">get()</span></code> peut retourner un <code class="docutils literal notranslate"><span class="pre">Optional</span></code> vide si l’une des conditions suivantes est vraie :</p>
<ul class="simple">
<li>Le <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> ne supporte pas le <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> donné</li>
<li>Le <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> supporte le <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code>, mais ne détient actuellement aucune donnée de ce type</li>
</ul>
<p>Il y a une grande différence sémantique entre les données étant absentes et les données composées des valeurs par défaut. Alors que le dernier est toujours possible, il y a des cas où il est impossible pour un <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> de supporter un type de données et donc de ne pas les garder. Des exemples de ceux-ci incluent :</p>
<ul class="simple">
<li>La <code class="docutils literal notranslate"><span class="pre">HealthData</span></code> est toujours présent sur tous les <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> (vanilla) qui le supportent</li>
<li>Le <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/mutable/DisplayNameData.html">DisplayNameData</a> est toujours présent sur un <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/entity/living/player/Player.html">Player</a>, mais peut être absent sur d’autres entités.</li>
</ul>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="transactions.html" class="btn btn-neutral float-right" title="Transactions" accesskey="n" rel="next">Suivant <span class="fa fa-angle-right"></span></a>
        <a href="keys.html" class="btn btn-neutral" title="Utilisation des Clés" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Précédent</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../../_static/flags/fr_FR.svg"
         alt="fr" title="Français">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/translations.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>