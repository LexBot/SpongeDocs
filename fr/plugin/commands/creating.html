
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Construction d’une commande &mdash; Documentation Sponge 7.2.0</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Index"
              href="../../genindex.html"/>        <link rel="search" title="Recherche" href="../../search.html"/>    <link rel="top" title="Documentation Sponge 7.2.0" href="../../index.html"/>        <link rel="up" title="Commandes de Plugin" href="index.html"/>        <link rel="next" title="Analyse des Arguments" href="arguments.html"/>        <link rel="prev" title="Commandes de Plugin" href="index.html"/>
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Créer un Serveur</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Stratégie de versioning</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Préparation pour le développement</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Création d’un Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">Versions de l’API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Mise en Place de votre Espace de Travail</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Configurer Votre Projet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Identifiants de Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Classe Principale du Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Cycle de vie des Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Injection de Dépendances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practices/index.html">Bonnes Pratiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Optionnels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Journalisation (Logging) et Débogage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Text</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Commandes de Plugin</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Construction d’une commande</a></li>
<li class="toctree-l3"><a class="reference internal" href="arguments.html">Analyse des Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="flags.html">Command Flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="childcommands.html">Sous-Commandes</a></li>
<li class="toctree-l3"><a class="reference internal" href="service.html">Le gestionnaire de commandes</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandcallable.html">API pour Commandes de Bas Niveau</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Événements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Configuration des plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">L’API des Ressources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">La Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Blocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entités</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Effets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Bases de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Collection de Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Views d’un Livre</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Économie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">Génération du monde</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Gestionnaire de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Gestionnaire de Profil de Jeu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Données du Joueur Hors-Ligne</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Debugging d’un plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutoriels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/index.html">Plugins dépendants des implémentations</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Documentation d’Ore</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contribuer à Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">À propos du Projet Sponge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Création d’un Plugin</a> &raquo;</li>
          <li><a href="index.html">Commandes de Plugin</a> &raquo;</li>
    <li>Construction d’une commande</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugin/commands/creating.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="building-a-command">
<h1>Construction d’une commande<a class="headerlink" href="#building-a-command" title="Lien permanent vers ce titre">¶</a></h1>
<p>La première étape est d’obtenir un nouveau constructeur <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/spec/CommandSpec.html">CommandSpec</a>. Le constructeur fournit des méthodes permettant de modifier les messages d’aides de la commande, les différents arguments de la commande et la commande en elle-même. Ces méthodes peuvent être enchaînées.</p>
<p>Pour finalement construire sa commande, il faudra appeler la méthode <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/spec/CommandSpec.Builder.html#build--">CommandSpec.Builder#build()</a>.</p>
<p>Après cela, vous devez enregistrer la commande.</p>
<div class="section" id="example-building-a-simple-command">
<h2>Exemple: Construction d’une Commande Simple<a class="headerlink" href="#example-building-a-simple-command" title="Lien permanent vers ce titre">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.Sponge</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.text.Text</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.spec.CommandSpec</span><span class="p">;</span>

<span class="n">PluginContainer</span> <span class="n">plugin</span> <span class="o">=</span> <span class="p">...;</span>

<span class="n">CommandSpec</span> <span class="n">myCommandSpec</span> <span class="o">=</span> <span class="n">CommandSpec</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
    <span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Hello World Command&quot;</span><span class="p">))</span>
    <span class="p">.</span><span class="na">permission</span><span class="p">(</span><span class="s">&quot;myplugin.command.helloworld&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">executor</span><span class="p">(</span><span class="k">new</span> <span class="n">HelloWorldCommand</span><span class="p">())</span>
    <span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="n">Sponge</span><span class="p">.</span><span class="na">getCommandManager</span><span class="p">().</span><span class="na">register</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">myCommandSpec</span><span class="p">,</span> <span class="s">&quot;helloworld&quot;</span><span class="p">,</span> <span class="s">&quot;hello&quot;</span><span class="p">,</span> <span class="s">&quot;test&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="overview-of-the-commandspec-builder-methods">
<h2>Vue d’ensemble des méthodes du constructeur CommandSpec<a class="headerlink" href="#overview-of-the-commandspec-builder-methods" title="Lien permanent vers ce titre">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Méthode</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">executor</span></code></td>
<td><p class="first">Définit l’exécution de la commande. (Voir <a class="reference internal" href="#writing-a-command-executor">Écrire l’Exécution de la Commande</a>).</p>
<p class="last"><strong>Définir l’objectif de la commande est impératif</strong> si la commande n’a pas de sous–commandes définies.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">arguments</span></code></td>
<td>Définit la spécification de l’argument pour cette commande (voir <a class="reference internal" href="arguments.html"><span class="doc">Analyse des Arguments</span></a>).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">permission</span></code></td>
<td>Définit la permission qui est requise afin d’utiliser la commande.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">description</span></code></td>
<td>Une description peu complète d’une seule ligne sur l’utilité de la commande, elle est affichée lorsque le joueur utilise le système d’aide.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">extendedDescription</span></code></td>
<td>Définit une description plus complète qui est affichée dans la liste d’aide. Elle sera ajoutée à la description moins complète.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">child</span></code></td>
<td>Ajoute une commande subsidiaire à cette commande avec un alias (voir <a class="reference internal" href="childcommands.html"><span class="doc">Sous-Commandes</span></a>).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">children</span></code></td>
<td>Définit les commandes subsidiaires de cette commandes avec leurs alias (voir <a class="reference internal" href="childcommands.html"><span class="doc">Sous-Commandes</span></a>).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">inputTokenizer</span></code></td>
<td><p class="first">Définit comment les arguments vont être décomposés. Par défaut, ils sont séparés par des espaces. Les guillemets comptent comme un seul argument.</p>
<p class="last">Exemple: <code class="docutils literal notranslate"><span class="pre">/tpworld</span> <span class="pre">Notch</span> <span class="pre">&quot;My</span> <span class="pre">World&quot;</span></code> est composée de 2 arguments <code class="docutils literal notranslate"><span class="pre">Notch</span></code> et <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">World</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">build</span></code></td>
<td>Construit la commande. Après cela, vous devrez l’enregistrer.</td>
</tr>
</tbody>
</table>
<div class="section" id="writing-a-command-executor">
<h3>Écrire l’Éxécution de la Commande<a class="headerlink" href="#writing-a-command-executor" title="Lien permanent vers ce titre">¶</a></h3>
<p>La seule chose requise pour construire une commande simple est la classe de l’exécution de la commande, qui contient la logique de la commande.</p>
<p>La classe doit implémenter l’interface <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/spec/CommandExecutor.html">CommandExecutor</a>, qui définit la méthode <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/spec/CommandExecutor.html#execute-org.spongepowered.api.command.CommandSource-org.spongepowered.api.command.args.CommandContext-">CommandExecutor#execute(CommandSource, CommandContext)</a>. La méthode est appelée pendant l’exécution de la commande et possède deux arguments:</p>
<ul class="simple">
<li>La source qui exécute la commande. (ex: la console, un bloc de commande ou bien un joueur)</li>
<li>L’objet du contexte de la commande, qui contient l’analyse des arguments (voir <a class="reference internal" href="arguments.html"><span class="doc">Analyse des Arguments</span></a>)</li>
</ul>
</div>
</div>
<div class="section" id="example-simple-command-executor">
<h2>Exemple: Un Simple Exécuteur de Commande<a class="headerlink" href="#example-simple-command-executor" title="Lien permanent vers ce titre">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.command.CommandException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.CommandResult</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.CommandSource</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.args.CommandContext</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.spec.CommandExecutor</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldCommand</span> <span class="kd">implements</span> <span class="n">CommandExecutor</span> <span class="p">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">CommandResult</span> <span class="nf">execute</span><span class="p">(</span><span class="n">CommandSource</span> <span class="n">src</span><span class="p">,</span> <span class="n">CommandContext</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">CommandException</span> <span class="p">{</span>
        <span class="n">src</span><span class="p">.</span><span class="na">sendMessage</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">CommandResult</span><span class="p">.</span><span class="na">success</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">Vous pouvez utiliser des <a class="reference external" href="https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html">classes anonymes</a> pour définir l’exécuteur de la commande dans le processus de construction des commandes (voir la page <a class="reference internal" href="arguments.html"><span class="doc">Analyse des Arguments</span></a>).</p>
</div>
</div>
<div class="section" id="player-only-commands">
<h2>Commandes utilisables par les Joueurs Seulement<a class="headerlink" href="#player-only-commands" title="Lien permanent vers ce titre">¶</a></h2>
<p>Parfois il est nécessaire que seul le joueur puisse exécuter une commande (ex : la commande <code class="docutils literal notranslate"><span class="pre">/suicide</span></code>).</p>
<p>Effectuer une vérification à l’aide de <code class="docutils literal notranslate"><span class="pre">instanceof</span></code> permet de déterminer le type de <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/CommandSource.html">CommandSource</a>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.entity.living.player.Player</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.source.CommandBlockSource</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.source.ConsoleSource</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">src</span> <span class="k">instanceof</span> <span class="n">Player</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Player</span> <span class="n">player</span> <span class="o">=</span> <span class="p">(</span><span class="n">Player</span><span class="p">)</span> <span class="n">src</span><span class="p">;</span>
    <span class="n">player</span><span class="p">.</span><span class="na">sendMessage</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Hello &quot;</span> <span class="o">+</span> <span class="n">player</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;!&quot;</span><span class="p">));</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">src</span> <span class="k">instanceof</span> <span class="n">ConsoleSource</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">src</span><span class="p">.</span><span class="na">sendMessage</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Hello GLaDOS!&quot;</span><span class="p">));</span>
    <span class="c1">// The Cake Is a Lie</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">src</span> <span class="k">instanceof</span> <span class="n">CommandBlockSource</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">src</span><span class="p">.</span><span class="na">sendMessage</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Hello Companion Cube!&quot;</span><span class="p">));</span>
    <span class="c1">// &lt;3</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Il est recommandé d’ajouter un argument facultatif <code class="docutils literal notranslate"><span class="pre">[player]</span></code> afin de rendre la commande <strong>utilisable par la console</strong> (ex <code class="docutils literal notranslate"><span class="pre">/suicide</span> <span class="pre">[player]</span></code>).</p>
<p class="last">La solution la plus simple pour ça est d’ajouter <code class="docutils literal notranslate"><span class="pre">playerOrSource</span></code> à l’élément de la commande (voir <a class="reference internal" href="arguments.html"><span class="doc">Analyse des Arguments</span></a>).</p>
</div>
<div class="section" id="command-results">
<h3>Résultats de la Commande<a class="headerlink" href="#command-results" title="Lien permanent vers ce titre">¶</a></h3>
<p>La méthode <code class="docutils literal notranslate"><span class="pre">CommandExecutor::execute()</span></code> doit toujours retourner un <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/CommandResult.html">CommandResult</a>. Dans la plupart des cas, il suffit juste de retourner <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/CommandResult.html#success--">CommandResult#success()</a> si la commande a été exécutée avec succès ou <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/CommandResult.html#empty--">CommandResult#empty()</a> si ce n’est pas le cas. Dans les cas où plusieurs d’informations doivent être déplacées, un <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/CommandResult.html#builder--">CommandResult#builder()</a> peut se révéler utile. Il fournit les méthodes <code class="docutils literal notranslate"><span class="pre">affectedBlocks()</span></code>, <code class="docutils literal notranslate"><span class="pre">affectedEntities()</span></code>, <code class="docutils literal notranslate"><span class="pre">affectedItems()</span></code>, <code class="docutils literal notranslate"><span class="pre">queryResult()</span></code> et <code class="docutils literal notranslate"><span class="pre">successCount()</span></code>, chacune acceptant un entier et affectant l’attribut de même nom. Tous les attributs qui ne sont pas définis pas le constructeur seront vides.</p>
<p>Les command blocks peuvent utiliser ces valeurs pour modifier les stats de scoreboard, ce qui peut être utilisé pour élaborer des constructions constituées de multiples command blocks. Un tutoriel sur la manière d’accéder aux données peut être trouvée <a class="reference external" href="https://minecraft.gamepedia.com/Tutorials/Command_stats">ici</a>.</p>
</div>
</div>
<div class="section" id="example-building-a-commandresult">
<h2>Exemple: Faire un CommandResult<a class="headerlink" href="#example-building-a-commandresult" title="Lien permanent vers ce titre">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">CommandResult</span> <span class="n">result</span> <span class="o">=</span> <span class="n">CommandResult</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
    <span class="p">.</span><span class="na">affectedEntities</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
    <span class="p">.</span><span class="na">successCount</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">.</span><span class="na">build</span><span class="p">();</span>
</pre></div>
</div>
<p>Cet exemple utilise un constructeur pour créer un <code class="docutils literal notranslate"><span class="pre">CommandResult</span></code> pour une commande qui affecte 42 entités et a été un succès.</p>
<div class="section" id="error-handling">
<h3>Gestion des erreurs<a class="headerlink" href="#error-handling" title="Lien permanent vers ce titre">¶</a></h3>
<p>La méthode <code class="docutils literal notranslate"><span class="pre">execute()</span></code> peut également lever une <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/CommandException.html">CommandException</a>, signalant qu’une erreur est survenue lors de l’exécution de la commande. Si cette Exception est levée, son message sera affiché dans la source de la commande, formatée comme une erreur. L’usage de la commande peut être aussi affiché. Un <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/command/args/ArgumentParseException.html">ArgumentParseException</a>, un sous-type de <code class="docutils literal notranslate"><span class="pre">CommandException</span></code> est automatiquement levé si les arguments de la commande ne peuvent pas être analysés.</p>
</div>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="arguments.html" class="btn btn-neutral float-right" title="Analyse des Arguments" accesskey="n" rel="next">Suivant <span class="fa fa-angle-right"></span></a>
        <a href="index.html" class="btn btn-neutral" title="Commandes de Plugin" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Précédent</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../../_static/flags/fr_FR.svg"
         alt="fr" title="Français">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/translations.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>