
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Journalisation (Logging) et Débogage &mdash; Documentation Sponge 7.2.0</title>

    <link rel="shortcut icon" href="../_static/favicon.ico"/>




    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Index"
              href="../genindex.html"/>        <link rel="search" title="Recherche" href="../search.html"/>    <link rel="top" title="Documentation Sponge 7.2.0" href="../index.html"/>        <link rel="up" title="Création d’un Plugin" href="index.html"/>        <link rel="next" title="Text" href="text/index.html"/>        <link rel="prev" title="Exemples d’utilisation" href="optional/usage.html"/>
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../index.html">
            <img src="../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../server/index.html">Créer un Serveur</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../versions/index.html">Stratégie de versioning</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../preparing/index.html">Préparation pour le développement</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Création d’un Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api-versions.html">Versions de l’API</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="workspace/index.html">Mise en Place de votre Espace de Travail</a></li>
<li class="toctree-l2"><a class="reference internal" href="project/index.html">Configurer Votre Projet</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin-identifier.html">Identifiants de Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin-class.html">Classe Principale du Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifecycle.html">Cycle de vie des Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="injection.html">Injection de Dépendances</a></li>
<li class="toctree-l2"><a class="reference internal" href="practices/index.html">Bonnes Pratiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="optional/index.html">Optionnels</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Journalisation (Logging) et Débogage</a></li>
<li class="toctree-l2"><a class="reference internal" href="text/index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/index.html">Commandes de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="event/index.html">Événements</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/index.html">Configuration des plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="assets.html">L’API des Ressources</a></li>
<li class="toctree-l2"><a class="reference internal" href="data/index.html">La Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="blocks/index.html">Blocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="entities/index.html">Entités</a></li>
<li class="toctree-l2"><a class="reference internal" href="items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="effects.html">Effets</a></li>
<li class="toctree-l2"><a class="reference internal" href="scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">Bases de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html">Collection de Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="bookview.html">Views d’un Livre</a></li>
<li class="toctree-l2"><a class="reference internal" href="economy/index.html">Économie</a></li>
<li class="toctree-l2"><a class="reference internal" href="wgen/index.html">Génération du monde</a></li>
<li class="toctree-l2"><a class="reference internal" href="manager.html">Gestionnaire de Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="game-profile-manager.html">Gestionnaire de Profil de Jeu</a></li>
<li class="toctree-l2"><a class="reference internal" href="offline-userplayer-data.html">Données du Joueur Hors-Ligne</a></li>
<li class="toctree-l2"><a class="reference internal" href="tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging d’un plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html">Tutoriels</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals/index.html">Plugins dépendants des implémentations</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ore/index.html">Documentation d’Ore</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contribuer à Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">À propos du Projet Sponge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
          <li><a href="index.html">Création d’un Plugin</a> &raquo;</li>
    <li>Journalisation (Logging) et Débogage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/plugin/logging.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="logging-and-debugging">
<h1>Journalisation (Logging) et Débogage<a class="headerlink" href="#logging-and-debugging" title="Lien permanent vers ce titre">¶</a></h1>
<p>Il existe quelques frameworks de journalisation disponibles pour Java. La journalisation est préférable à l’écriture sur la sortie standard (stdout) et la sortie d’erreur (stderr) avec <code class="docutils literal notranslate"><span class="pre">System.out.println()</span></code> pour un bon nombre de raisons:</p>
<ul class="simple">
<li>Les messages logués (enregistrés) sont classés par nom de source. Cela rend plus facile à comprendre d’où ils proviennent.</li>
<li>Les messages logués ont un niveau de sévérité qui permet un filtrage simple (ex: masquer toutes les entrées sans importance).</li>
<li>Le frameworks de log disponible vous permet d’activer ou désactiver les message de certaines sources.</li>
</ul>
<p>Sponge utilise <code class="docutils literal notranslate"><span class="pre">org.slf4j.Logger</span></code>, et non pas <code class="docutils literal notranslate"><span class="pre">java.util.logging.Logger</span></code>.</p>
<div class="section" id="getting-a-logger">
<h2>Obtenir un Logger<a class="headerlink" href="#getting-a-logger" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le module Guice utilisé lors de l’initialisation des plugins a un Logger au champ d’action limité à votre plugin. Cela vous permet d’annoter un champ, une méthode ou un constructeur avec <code class="docutils literal notranslate"><span class="pre">&#64;Inject</span></code> pour obtenir le «&nbsp;Logger&nbsp;» de votre plugin, qui est pré-configuré avec le bon ID de plugin.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Voir <a class="reference internal" href="plugin-class.html"><span class="doc">Classe Principale du Plugin</span></a> pour des informations sur la configuration de votre plugin ID.</p>
</div>
<p><strong>Exemple - Field</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">com.google.inject.Inject</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="p">;</span>

<span class="nd">@Inject</span>
<span class="kd">private</span> <span class="n">Logger</span> <span class="n">logger</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Exemple - Méthode</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="n">Logger</span> <span class="n">logger</span><span class="p">;</span>

<span class="nd">@Inject</span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">setLogger</span><span class="p">(</span><span class="n">Logger</span> <span class="n">logger</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">logger</span> <span class="o">=</span> <span class="n">logger</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Exemple - Constructeur</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// For the purpose of this example, &quot;Banana&quot; is the class name</span>

<span class="kd">private</span> <span class="n">Logger</span> <span class="n">logger</span><span class="p">;</span>

<span class="nd">@Inject</span>
<span class="kd">public</span> <span class="nf">Banana</span><span class="p">(</span><span class="n">Logger</span> <span class="n">logger</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">logger</span> <span class="o">=</span> <span class="n">logger</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Il est recommandé de définir votre Logger dans la classe principale de votre plugin, pour qu’elle soit instanciée avec l’injecteur Guice lorsque le plugin se lance.</p>
<p>Créer une méthode «&nbsp;Get&nbsp;» (voir <a class="reference external" href="http://docs.oracle.com/javaee/6/tutorial/doc/gjbbp.html">Getter and Setter</a>) pour votre Logger dans la même classe que celle où il a été défini serait l’idéal, bien que facultatif. Un exemple d’une méthode d’accesseur «&nbsp;Get&nbsp;» est illustré ci-dessous.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">Logger</span> <span class="nf">getLogger</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">logger</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="emitting-messages">
<h2>Émition de Messages<a class="headerlink" href="#emitting-messages" title="Lien permanent vers ce titre">¶</a></h2>
<p>Envoyer un message avec votre Logger est vraiment très simple.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">L’exemple suivant suppose que la méthode d’accesseur pour votre Logger est nommée “”getLogger()””, comme indiqué dans la section précédente. Cela peut différer pour vous selon ce que vous voulez retourner avec cet accesseur.</p>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">getLogger</span><span class="p">().</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;String&quot;</span><span class="p">);</span>
<span class="n">getLogger</span><span class="p">().</span><span class="na">debug</span><span class="p">(</span><span class="s">&quot;String&quot;</span><span class="p">);</span>
<span class="n">getLogger</span><span class="p">().</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;String&quot;</span><span class="p">);</span>
<span class="n">getLogger</span><span class="p">().</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;String&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Cette <code class="docutils literal notranslate"><span class="pre">String</span></code> (chaîne de caractères) est le message que vous voulez envoyer. Par exemple:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">getLogger</span><span class="p">().</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;This is a warning!&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="manipulating-the-logging">
<h2>Manipuler le Logging<a class="headerlink" href="#manipulating-the-logging" title="Lien permanent vers ce titre">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ces techniques doivent seulement être utilisées dans de très rares cas, comme des défauts de logging mal choisis dans des bibliothèques. Ajoutez une option de configuration pour les désactiver si vous les utilisez.</p>
</div>
<p>Certains bibliothèques utilisent de mauvaises pratiques de logging, comme faire du logging à un niveau trop haut. Dans ces cas, vous avez trois choix :</p>
<ol class="arabic">
<li><p class="first">Demandez à l’auteur de la bibliothèque d’ajuster ses standards de logging, afin de corriger le problème à sa source.</p>
</li>
<li><p class="first">Recommandez à vos utilisateurs de <a class="reference internal" href="../server/spongineer/logs.html"><span class="doc">configurer le logging</span></a> en utilisant un fichier de configuration <code class="docutils literal notranslate"><span class="pre">log4j2.xml</span></code>. Fournissez aux utilisateurs les additions de configuration recommandées.</p>
</li>
<li><p class="first">Configurer le logging dans votre plugin vous-même :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="p">((</span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">log4j</span><span class="p">.</span><span class="na">core</span><span class="p">.</span><span class="na">Logger</span><span class="p">)</span> <span class="n">LogManager</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="s">&quot;FtpLoggingFilter&quot;</span><span class="p">)).</span><span class="na">setLevel</span><span class="p">(</span><span class="n">Level</span><span class="p">.</span><span class="na">WARN</span><span class="p">);</span>
</pre></div>
</div>
<p>Cela configure le niveau de log du logger <code class="docutils literal notranslate"><span class="pre">FtpLoggingFilter</span></code> à <code class="docutils literal notranslate"><span class="pre">WARN</span></code>. Cela va cacher tous les messages qui utilisent un niveau de log plus bas comme <code class="docutils literal notranslate"><span class="pre">INFO</span></code> et <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Cette solution assume que log4j2 est utilisé comme framework de logging par le serveur, cependant, cela peut ne pas être le cas pour toutes/les futures implémentations de SpongeAPI.</p>
</div>
</li>
</ol>
<p>Si vous avez des questions à propos du logging, vous pouvez toujours nous demander sur IRC, Discord ou les Forums.</p>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="text/index.html" class="btn btn-neutral float-right" title="Text" accesskey="n" rel="next">Suivant <span class="fa fa-angle-right"></span></a>
        <a href="optional/usage.html" class="btn btn-neutral" title="Exemples d’utilisation" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Précédent</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../_static/flags/fr_FR.svg"
         alt="fr" title="Français">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../_static/jquery.js"></script>      <script type="text/javascript" src="../_static/underscore.js"></script>      <script type="text/javascript" src="../_static/doctools.js"></script>      <script type="text/javascript" src="../_static/language_data.js"></script>      <script type="text/javascript" src="../_static/translations.js"></script>      <script type="text/javascript" src="../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>