
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bad-Practices &mdash; Sponge 7.2.0 Dokumentation</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Stichwortverzeichnis"
              href="../../genindex.html"/>        <link rel="search" title="Suche" href="../../search.html"/>    <link rel="top" title="Sponge 7.2.0 Dokumentation" href="../../index.html"/>        <link rel="up" title="Vorgehensweisen" href="index.html"/>        <link rel="next" title="Optionals" href="../optional/index.html"/>        <link rel="prev" title="Bewährtes Vorgehen" href="best.html"/>
    <!-- Google Analytics -->
    <script>
        (function(S,p,o,n,g,i,e){S['GoogleAnalyticsObject']=g;S[g]=S[g]||function(){
        (S[g].q=S[g].q||[]).push(arguments)},S[g].l=1*new Date();i=p.createElement(o),
        e=p.getElementsByTagName(o)[0];i.async=1;i.src=n;e.parentNode.insertBefore(i,e)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59476017-2', 'auto');
        ga('send', 'pageview');
    </script>

  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Einen Server erstellen</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Versionsrichtlinie</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Die Arbeitsumgebung einrichten</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Plugins erstellen</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">API-Versionen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Build Systeme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Den Arbeitsbereich einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Das Projekt einrichten</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Plugin Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Hauptklasse des Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Der Plugin-Lebenszyklus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Dependency Injection</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Vorgehensweisen</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="best.html">Bewährtes Vorgehen</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Bad-Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Optionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Loggen und Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Plugin Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Plugins konfigurieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">Die Dateianhang API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">The Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Blöcke</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Gegenstände</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Effekte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Datenbanken</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Banne</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Metrics Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Bücher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Wirtschaft</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">Weltgenerierung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Plugin-Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Game Profile Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Offline Player Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Plugin Metadaten</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Plugins Debuggen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/index.html">Implementation-dependent Plugins</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Ore Dokumentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Zu Sponge beitragen</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">Über das Sponge Projekt</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Plugins erstellen</a> &raquo;</li>
          <li><a href="index.html">Vorgehensweisen</a> &raquo;</li>
    <li>Bad-Practices</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugin/practices/bad.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="bad-practices">
<h1>Bad-Practices<a class="headerlink" href="#bad-practices" title="Link zu dieser Überschrift">¶</a></h1>
<p>Diese Bad-Practices sollten vermieden werden, da sie Memory-Leaks (<code class="docutils literal notranslate"><span class="pre">OutOfMemoryError</span></code>), Lags und Inkonsistenzen verursacht.</p>
<div class="section" id="storing-references">
<h2>Speichern von Referenzen<a class="headerlink" href="#storing-references" title="Link zu dieser Überschrift">¶</a></h2>
<p>Bestimmte Instanzen wie beispielsweise</p>
<ul class="simple">
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/DataHolder.html">DataHolder</a></li>
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/block/tileentity/TileEntity.html">TileEntity</a></li>
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/CommandSource.html">CommandSource</a></li>
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/entity/Entity.html">Entity</a></li>
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/entity/living/player/Player.html">Player</a></li>
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/service/permission/Subject.html">Subject</a></li>
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/world/Chunk.html">Chunk</a></li>
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/world/Dimension.html">Dimension</a></li>
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/world/World.html">World</a></li>
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/entity/living/player/User.html">User</a></li>
<li><dl class="first docutils">
<dt>und Container, die die oben genannten Elemente enthalten <strong>könnten</strong> wie beispielsweise</dt>
<dd><ul class="first last">
<li><code class="docutils literal notranslate"><span class="pre">Collections</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">Maps</span></code></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>sollten <strong>NIEMALS</strong> in Plugins gespeichert oder gecached werden.</p>
<p>Dies sind die Hauptgründe hierfür:</p>
<ul class="simple">
<li>Die Referenzen verhindern das ordentliche Aufräumen von nicht länger benötigten Objekten</li>
<li>Die Instanzen sind möglicherweise nicht länger gültig</li>
</ul>
<p>Dies kann einfach vermieden werden indem die entsprechenden Snapshots verwendet werden oder die UUID des Objektes gespeichert wird und du eine aktuelle Instanz anfragst, wenn du diese benötigst.</p>
</div>
<div class="section" id="io-on-the-main-thread">
<h2>E/A auf dem Haupt-Thread<a class="headerlink" href="#io-on-the-main-thread" title="Link zu dieser Überschrift">¶</a></h2>
<p>Das Ausführen von E/A Operationen wie das Laden von Konfigurationen/Daten oder das Suchen nach Updates bzw. das Verbinden zu einer Webseite benötigt viel Zeit und großen Einfluss auf die TPS des Servers. Derartige Aufgaben sollten entweder in eigenen Threads oder unter Verwendung des asynchronen Verarbeitungsfeatures des eingebauten Schedulers ausgeführt werden. Allerdings ist es vollkommen in Ordnung (Konfigurations-)Dateien auf dem Main-Thread zu laden, während der Server startet/das Plugin initialisiert wird.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="na">game</span><span class="p">.</span><span class="na">getScheduler</span><span class="p">().</span><span class="na">createAsyncExecutor</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="na">execute</span><span class="p">(</span><span class="k">this</span><span class="p">::</span><span class="n">checkForUpdates</span><span class="p">);</span>
</pre></div>
</div>
<p>Für mehr Informationen zu diesem Thema sieh dir dir <a class="reference internal" href="../scheduler.html"><span class="doc">Scheduler</span></a> Doku an.</p>
<p>Wenn dies falsch gemacht wird, könntest du Clients sehen, die die Verbindung verlieren, oder der Watchdog könnte sogar den Server neustarten.</p>
</div>
<div class="section" id="accessing-game-objects-outside-the-main-thread">
<h2>Zugreifen auf Objekte von außerhalb des Haupt-Threads<a class="headerlink" href="#accessing-game-objects-outside-the-main-thread" title="Link zu dieser Überschrift">¶</a></h2>
<p>Das Zugreifen auf Spiel-Objekte von außerhalb des Haupt-Threads kann zu Abstürzen, Unstimmigkeiten und diversen anderen Problemen führen und sollte vermieden werden. Wenn du eine langwierige Operation auf einem anderen Thread ausführen möchtest, solltest du den <a class="reference internal" href="../scheduler.html"><span class="doc">Scheduler</span></a> verwenden, um die nötigen Änderungen am Objekt wieder auf dem Haupt-Thread auszuführen. Wenn du das Spiel-Objekt in einem anderen Thread verwenden möchtest, verwende einen Snapshot der Instanz oder einen losgelösten Datencontainer.</p>
<div class="admonition warning">
<p class="first admonition-title">Warnung</p>
<p class="last">Wenn dies falsch gehandhabt wird, wirst du im besten Fall eine <code class="docutils literal notranslate"><span class="pre">ConcurrentModificationException</span></code> mit oder ohne Serverabsturz bekommen und im schlimmsten Fall einen defekten Spieler/Welt/Server.</p>
</div>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../optional/index.html" class="btn btn-neutral float-right" title="Optionals" accesskey="n" rel="next">Nächste <span class="fa fa-angle-right"></span></a>
        <a href="best.html" class="btn btn-neutral" title="Bewährtes Vorgehen" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Vorherige</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../../_static/flags/de_DE.svg"
         alt="de" title="Deutsch">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/translations.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>