
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Usando el API de Economía &mdash; documentación de Sponge - 7.2.0</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Índice"
              href="../../genindex.html"/>        <link rel="search" title="Búsqueda" href="../../search.html"/>    <link rel="top" title="documentación de Sponge - 7.2.0" href="../../index.html"/>        <link rel="up" title="Economía" href="index.html"/>        <link rel="next" title="Mejores Practicas de la API Economy" href="practices.html"/>        <link rel="prev" title="Conceptos básicos" href="basics.html"/>
    <!-- Google Analytics -->
    <script>
        (function(S,p,o,n,g,i,e){S['GoogleAnalyticsObject']=g;S[g]=S[g]||function(){
        (S[g].q=S[g].q||[]).push(arguments)},S[g].l=1*new Date();i=p.createElement(o),
        e=p.getElementsByTagName(o)[0];i.async=1;i.src=n;e.parentNode.insertBefore(i,e)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59476017-2', 'auto');
        ga('send', 'pageview');
    </script>

  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Creando un Servidor</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Versioning Policy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Preparándose para el Desarrollo</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Creando un Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">API-Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Sistemas de Compilación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Configuración de su Espacio de Trabajo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Configurando Su Proyecto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Identificadores de Complementos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Clase de Plug-in Principal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Ciclo de vida del Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Inyección de Dependencia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practices/index.html">Prácticas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Opcionales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Registro y Depuración</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Texto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Plugin Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Eventos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Configurando Extensiones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">La API de Activos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">La API de Datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Bloques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entidades</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Articulos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Ofertas de Intercambio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Efectos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Programador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Servicios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Bases de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permisos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Baneos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Metrics Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Vistas del Libro</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Economía</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="basics.html">Conceptos básicos</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Usando el API de Economía</a></li>
<li class="toctree-l3"><a class="reference internal" href="practices.html">Mejores Practicas de la API Economy</a></li>
<li class="toctree-l3"><a class="reference internal" href="implementing.html">Implementando la API Economy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">Generación de Mundo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Administrador de Complementos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Administrador de Perfiles del Juego</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Datos del Jugador Fuera de Línea</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Listas de Tabulaciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Metadatos del Complemento</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Trazado de Rayos (Ray Tracing)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Depuración de Complemento</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutoriales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/index.html">Implementation-dependent Plugins</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Documentación Ore</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contribuyendo a Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">Acerca del proyecto Sponge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Creando un Plugin</a> &raquo;</li>
          <li><a href="index.html">Economía</a> &raquo;</li>
    <li>Usando el API de Economía</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugin/economy/using.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="using-the-economy-api">
<h1>Usando el API de Economía<a class="headerlink" href="#using-the-economy-api" title="Enlazar permanentemente con este título">¶</a></h1>
<p>El API Economy unifica todos los plug-ins economy bajo un API. Esto significa que cualquier plug-in usando el API Economy será compatible con todos los plug-ins economy que implementen dicho API. Esta página le guiará en los pasos para el uso del API Economy en su propio plug-in.</p>
<div class="section" id="loading-the-economyservice">
<h2>Cargando EconomyService<a class="headerlink" href="#loading-the-economyservice" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Si desea utilizar el API Economy, primero debe cargar la clase <a href="#id1"><span class="problematic" id="id2">:javadoc:`EconomyService`usando el :javadoc:`ServiceManager`</span></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Por favor, note que debe prestar atención a los diferentes “estados del juego” mientras el servidor está cargando, deteniéndose o ejecutándose cuando use servicios como el Economy API. Para más información, por favor diríjase a :doc:<a href="#id1"><span class="problematic" id="id2">`</span></a>/plugin/services.</p>
</div>
<div class="section" id="example-loading-the-economyservice">
<h3>Ejemplo: Cargando EconomyService<a class="headerlink" href="#example-loading-the-economyservice" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.service.economy.EconomyService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.Sponge</span><span class="p">;</span>

<span class="n">Optional</span><span class="o">&lt;</span><span class="n">EconomyService</span><span class="o">&gt;</span> <span class="n">serviceOpt</span> <span class="o">=</span> <span class="n">Sponge</span><span class="p">.</span><span class="na">getServiceManager</span><span class="p">().</span><span class="na">provide</span><span class="p">(</span><span class="n">EconomyService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">serviceOpt</span><span class="p">.</span><span class="na">isPresent</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// handle there not being an economy implementation</span>
<span class="p">}</span>
<span class="n">EconomyService</span> <span class="n">economyService</span> <span class="o">=</span> <span class="n">serviceOpt</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Mantenga este servicio en una variable local en lugar de en una variable “miembro” ya que el proveedor (implementación) podría cambiar en cualquier momento. Si por algún motivo necesita alojarlo en una variable miembro, use :javadoc: <cite>ChangeServiceProviderEvent</cite> para mantener la implementación actualizada.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">A diferencia de otros servicios, debería intentar usar <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/service/ServiceManager.html#provide-java.lang.Class-">ServiceManager#provide(Class)</a> en lugar de <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/service/ServiceManager.html#provideUnchecked-java.lang.Class-">ServiceManager#provideUnchecked(Class)</a> porque Sponge no proporciona una implementación por defecto del <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/service/economy/EconomyService.html">EconomyService</a>, y por esto no se garantiza que exista.</p>
</div>
</div>
</div>
<div class="section" id="using-the-economyservice">
<h2>Usando EconomyService<a class="headerlink" href="#using-the-economyservice" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Luego de cargar el <code class="docutils literal notranslate"><span class="pre">EconomyService</span></code> y asignarlo a una variable, usted está listo para acceder a todas las características que el API Economy tiene para ofrecer.</p>
<div class="section" id="example-getting-a-player-s-balance">
<h3>Ejemplo: Conseguir el balance de un jugador<a class="headerlink" href="#example-getting-a-player-s-balance" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.entity.living.player.Player</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.service.economy.EconomyService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.service.economy.account.UniqueAccount</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="n">Optional</span><span class="o">&lt;</span><span class="n">UniqueAccount</span><span class="o">&gt;</span> <span class="n">uOpt</span> <span class="o">=</span> <span class="n">economyService</span><span class="p">.</span><span class="na">getOrCreateAccount</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="na">getUniqueId</span><span class="p">());</span>
<span class="k">if</span> <span class="p">(</span><span class="n">uOpt</span><span class="p">.</span><span class="na">isPresent</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">UniqueAccount</span> <span class="n">acc</span> <span class="o">=</span> <span class="n">uOpt</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
    <span class="n">BigDecimal</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">acc</span><span class="p">.</span><span class="na">getBalance</span><span class="p">(</span><span class="n">economyService</span><span class="p">.</span><span class="na">getDefaultCurrency</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Algunos métodos de <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/service/economy/account/Account.html">Account</a> requieren variables como:</p>
<ul class="simple">
<li>Moneda: La moneda involucrada en el intercambio</li>
<li>Causa: Lo que causó el cambio a la cuenta</li>
<li>Contexto: El contexto en el que ocurrió el cambio</li>
</ul>
<p>Estos son para usos más avanzados, pero aún debe ser llenado. Aquí abajo está un lista de valores por defecto aceptables:</p>
<ul class="simple">
<li>Moneda: <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/service/economy/EconomyService.html#getDefaultCurrency--">EconomyService#getDefaultCurrency()</a></li>
<li>Cause: <code class="docutils literal notranslate"><span class="pre">Cause.of(EventContext.builder().add(EventContextKeys.PLUGIN,</span> <span class="pre">plugin).build(),</span> <span class="pre">plugin)</span></code></li>
<li>Contexto: <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">HashSet&lt;Context&gt;()</span></code></li>
</ul>
</div>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="practices.html" class="btn btn-neutral float-right" title="Mejores Practicas de la API Economy" accesskey="n" rel="next">Siguiente <span class="fa fa-angle-right"></span></a>
        <a href="basics.html" class="btn btn-neutral" title="Conceptos básicos" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Previo</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../../_static/flags/es_ES.svg"
         alt="es" title="Español">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/translations.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>