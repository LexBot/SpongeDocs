
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menerapkan datamanipulator &mdash; dokumentasi Sponge 7.2.0</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Indeks"
              href="../../genindex.html"/>        <link rel="search" title="Pencarian" href="../../search.html"/>    <link rel="top" title="dokumentasi Sponge 7.2.0" href="../../index.html"/>        <link rel="up" title="Mengembangkan Spenge" href="index.html"/>        <link rel="next" title="Menulis SpongeDocs" href="../spongedocs.html"/>        <link rel="prev" title="Mixin" href="mixins.html"/>
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Membuat sebuah server</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Versioning Policy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Mempersiapkan untuk Pengembangan</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../plugin/index.html">Membuat Plugin</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Dokumentasi bijih</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Berkontribusi pada Sponge</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../guidelines.html">Pedoman kontribusi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howtogit.html">Cara Git (Hub)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Mengembangkan Spenge</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="codestyle.html">Kode gaya</a></li>
<li class="toctree-l3"><a class="reference internal" href="git-implementation.html">Git Alur kerja dan Pelaksanaan untuk API</a></li>
<li class="toctree-l3"><a class="reference internal" href="pr.html">Mengirim permintaan tarik</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html">Debugging Sponge</a></li>
<li class="toctree-l3"><a class="reference internal" href="mixins.html">Mixin</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Menerapkan datamanipulator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../spongedocs.html">Menulis SpongeDocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting.html">Porting Sponge untuk Platform Lainnya</a></li>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html">Repository Branch Layout</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">Tentang Sponge Project</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Berkontribusi pada Sponge</a> &raquo;</li>
          <li><a href="index.html">Mengembangkan Spenge</a> &raquo;</li>
    <li>Menerapkan datamanipulator</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/contributing/implementation/datamanipulator.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="implementing-datamanipulators">
<h1>Menerapkan datamanipulator<a class="headerlink" href="#implementing-datamanipulators" title="Link permanen untuk headline ini">Â¶</a></h1>
<p>Ini merupakan petunjuk bagi para kontributor yang ingin membantu pelaksanaan Data API dengan membuat DataManipulators. Daftar DataManipulators yang telah terupdate yang akan dijalankan bisa di temukan di 'SpongeCommon Issue #8 &lt;<a class="reference external" href="https://github.com/SpongePowered/SpongeCommon/issues/8">https://github.com/SpongePowered/SpongeCommon/issues/8</a>&gt;'_.</p>
<p>To fully implement a <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/DataManipulator.html">DataManipulator</a> these steps must be followed:</p>
<ol class="arabic simple">
<li>Terapkan ' ' datamanipulator ' ' sendiri</li>
<li>Implement the <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/ImmutableDataManipulator.html">ImmutableDataManipulator</a></li>
</ol>
<p>Bila langkah-langkah ini telah selesai, berikut juga harus dilakukan:</p>
<ol class="arabic simple" start="3">
<li>Register the <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/key/Key.html">Key</a> in the <code class="docutils literal notranslate"><span class="pre">KeyRegistryModule</span></code></li>
<li>Terapkan ' ' datamanipulator ' '</li>
<li>Implement the <code class="docutils literal notranslate"><span class="pre">ValueProcessor</span></code> for each <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/value/mutable/Value.html">Value</a> being represented by the <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code></li>
</ol>
<p>Jika data berlaku untuk blok, beberapa metode juga harus dicampur ke blok.</p>
<div class="admonition note">
<p class="first admonition-title">Catatan</p>
<p class="last">Pastikan anda mengukiti <span class="xref std std-doc">../petunjuk</span> kami.</p>
</div>
<p>The following snippet shows the imports/paths for some classes in SpongeCommon that you will need:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.common.data.DataProcessor</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.common.data.ValueProcessor</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.common.data.manipulator.immutable.entity.ImmutableSpongeHealthData</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.common.data.manipulator.mutable.common.AbstractData</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.common.data.manipulator.mutable.entity.SpongeHealthData</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.common.data.processor.common.AbstractEntityDataProcessor</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.common.util.Constants</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.common.data.util.NbtDataUtil</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.common.registry.type.data.KeyRegistryModule</span><span class="p">;</span>
</pre></div>
</div>
<div class="section" id="implement-the-datamanipulator">
<h2>1. Terapkan Datamanipulator<a class="headerlink" href="#implement-the-datamanipulator" title="Link permanen untuk headline ini">Â¶</a></h2>
<p>The naming convention for <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> implementations is the name of the interface prefixed with &quot;Sponge&quot;.
So to implement the <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/mutable/entity/HealthData.html">HealthData</a> interface, we create a class named <code class="docutils literal notranslate"><span class="pre">SpongeHealthData</span></code> in the appropriate package.
For implementing the <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> first have it extend an appropriate abstract class from the
<code class="docutils literal notranslate"><span class="pre">org.spongepowered.common.data.manipulator.mutable.common</span></code> package. The most generic there is <code class="docutils literal notranslate"><span class="pre">AbstractData</span></code>
but there are also abstractions that reduce boilerplate code even more for some special cases like
<code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code>s only containing a single value.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpongeHealthData</span> <span class="kd">extends</span> <span class="n">AbstractData</span><span class="o">&lt;</span><span class="n">HealthData</span><span class="p">,</span> <span class="n">ImmutableHealthData</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">HealthData</span> <span class="p">{</span>
    <span class="o">[</span><span class="p">...</span><span class="o">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ada dua jenis argumen untuk AbstractData kelas. Yang pertama adalah interface yang diimplementasikan oleh kelas ini, yang kedua adalah antarmuka yang dilaksanakan oleh yang bersangkutan, <cite>ImmutableDataManipulator</cite>.</p>
<div class="section" id="the-constructor">
<h3>Pembuatnya<a class="headerlink" href="#the-constructor" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>Dalam kebanyakan kasus saat menerapkan abstrak ' ' Datamanipulator ' ' kamu harus memiliki dua konstruktor:</p>
<ul class="simple">
<li>Satu tanpa argumen (tidak-args) yang akan memanggil konstruktor kedua dengan &quot;gagal&quot; nilai</li>
<li>Konstruktor kedua yang mengambil semua nilai yang didukungnya.</li>
</ul>
<p>Konstruktor kedua harus</p>
<ul class="simple">
<li>lakukan panggilan ke <code class="docutils literal notranslate"><span class="pre">AbstrakData</span></code> konstruktor, melewati tahapan rujukan untuk pelaksanaan antar muka.</li>
<li>pastikan nilai yang dilewatkan benar</li>
<li>hubungi <code class="docutils literal notranslate"><span class="pre">registerGettersAndSetters()</span></code> metode</li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import static</span> <span class="nn">com.google.common.base.Preconditions.checkArgument</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpongeHealthData</span> <span class="kd">extends</span> <span class="n">AbstractData</span><span class="o">&lt;</span><span class="n">HealthData</span><span class="p">,</span> <span class="n">ImmutableHealthData</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">HealthData</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kt">double</span> <span class="n">health</span><span class="p">;</span>
    <span class="kd">private</span> <span class="kt">double</span> <span class="n">maxHealth</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">SpongeHealthData</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">(</span><span class="mi">20</span><span class="n">D</span><span class="p">,</span> <span class="mi">20</span><span class="n">D</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="nf">SpongeHealthData</span><span class="p">(</span><span class="kt">double</span> <span class="n">health</span><span class="p">,</span> <span class="kt">double</span> <span class="n">maxHealth</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">HealthData</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
        <span class="n">checkArgument</span><span class="p">(</span><span class="n">maxHealth</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="na">health</span> <span class="o">=</span> <span class="n">health</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="na">maxHealth</span> <span class="o">=</span> <span class="n">maxHealth</span><span class="p">;</span>
        <span class="n">registerGettersAndSetters</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="o">[</span><span class="p">...</span><span class="o">]</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Since we know that both current health and maximum health are bounded values, we need to make sure no values
outside of these bounds can be passed. To achieve this, we use guava's <code class="docutils literal notranslate"><span class="pre">Preconditions</span></code> of which we import the
required methods statically.</p>
<div class="admonition note">
<p class="first admonition-title">Catatan</p>
<p class="last">Never use so-called magic values (arbitrary numbers, booleans etc.) in your code. Instead, locate the
<code class="docutils literal notranslate"><span class="pre">DataConstants</span></code> class and use a fitting constant - or create one, if necessary.</p>
</div>
</div>
<div class="section" id="accessors-defined-by-the-interface">
<h3>Para pengakses ditentukan oleh Antarmuka<a class="headerlink" href="#accessors-defined-by-the-interface" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>The interface we implement specifies some methods to access <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/value/mutable/Value.html">Value</a> objects. For <code class="docutils literal notranslate"><span class="pre">HealthData</span></code>, those are
<a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/mutable/entity/HealthData.html#health--">HealthData#health()</a> and <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/mutable/entity/HealthData.html#maxHealth--">HealthData#maxHealth()</a>. Every call to those should yield a new <code class="docutils literal notranslate"><span class="pre">Value</span></code>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">MutableBoundedValue</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="nf">health</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">SpongeValueFactory</span><span class="p">.</span><span class="na">boundedBuilder</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">)</span>
        <span class="p">.</span><span class="na">minimum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="p">.</span><span class="na">maximum</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">maxHealth</span><span class="p">)</span>
        <span class="p">.</span><span class="na">defaultValue</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">maxHealth</span><span class="p">)</span>
        <span class="p">.</span><span class="na">actualValue</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">health</span><span class="p">)</span>
        <span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Karena <code class="docutils literal notranslate"><span class="pre">Double</span></code> adalah <code class="docutils literal notranslate"><span class="pre">Comparable</span></code>, kita tidak perlu secara eksplisit menentukan komparator.</p>
</div>
<p>If no current value is specified, calling <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/value/BaseValue.html#get--">BaseValue#get()</a> on the <code class="docutils literal notranslate"><span class="pre">Value</span></code> returns the default value.</p>
</div>
<div class="section" id="copying-and-serialization">
<h3>Penyalinan dan serialisasi<a class="headerlink" href="#copying-and-serialization" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>The two methods <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/DataManipulator.html#copy--">DataManipulator#copy()</a> and <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/DataManipulator.html#asImmutable--">DataManipulator#asImmutable()</a> are not much work to
implement. For both you just need to return a mutable or an immutable data manipulator respectively, containing the same
data as the current instance.</p>
<p>The method <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/DataSerializable.html#toContainer--">DataSerializable#toContainer()</a> is used for serialization purposes. Use
<a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/DataContainer.html#createNew--">DataContainer#createNew()</a> as the result and apply to it the values stored within this instance.
A <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/DataContainer.html">DataContainer</a> is basically a map mapping <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/DataQuery.html">DataQuery</a>s to values. Since a <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/key/Key.html">Key</a> always
contains a corresponding <code class="docutils literal notranslate"><span class="pre">DataQuery</span></code>, just use those by passing the <code class="docutils literal notranslate"><span class="pre">Key</span></code> directly.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">DataContainer</span> <span class="nf">toContainer</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">super</span><span class="p">.</span><span class="na">toContainer</span><span class="p">()</span>
        <span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="na">health</span><span class="p">)</span>
        <span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="na">maxHealth</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="registergettersandsetters">
<h3>registerGettersAndSetters()<a class="headerlink" href="#registergettersandsetters" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>Metode <cite>toContainer()</cite> digunakan untuk serialisasi tujuan. Menggunakan <cite>MemoryDataContainer</cite> sebagai hasil dan menerapkan nilai-nilai yang disimpan dalam contoh ini. <cite>DataContainer</cite> pada dasarnya adalah sebuah peta pemetaan <cite>DataQuery</cite>s untuk nilai-nilai. Sejak a <cite>Kunci</cite> selalu berisi sesuai <cite>DataQuery</cite>, hanya digunakan oleh orang-orang yang lewat <cite>Kunci</cite> ini diatas:</p>
<ul class="simple">
<li>register a <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html">Supplier</a> to directly get the value</li>
<li>register a <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html">Consumer</a> to directly set the value</li>
<li>daftarkan <code class="docutils literal notranslate"><span class="pre">Supplier&lt;Value&gt;</span></code> untuk mendapatkan <code class="docutils literal notranslate"><span class="pre">Nilai</span></code> yang berubah-ubah</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Supplier</span></code> dan <code class="docutils literal notranslate"><span class="pre">Consumer</span></code> merupakan penghubung fungsional, sehingga Java 8 Lambdas dapat digunakan.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="n">SpongeHealthData</span> <span class="nf">setCurrentHealthIfValid</span><span class="p">(</span><span class="kt">double</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="n">Float</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">health</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Invalid value for current health&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">private</span> <span class="n">SpongeHealthData</span> <span class="nf">setMaximumHealthIfValid</span><span class="p">(</span><span class="kt">double</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="n">Float</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">maxHealth</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Invalid value for maximum health&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">registerGettersAndSetters</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">registerFieldGetter</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">,</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="k">this</span><span class="p">.</span><span class="na">health</span><span class="p">);</span>
    <span class="n">registerFieldSetter</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">,</span> <span class="k">this</span><span class="p">::</span><span class="n">setCurrentHealthIfValid</span><span class="p">);</span>
    <span class="n">registerKeyValue</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">,</span> <span class="k">this</span><span class="p">::</span><span class="n">health</span><span class="p">);</span>

    <span class="n">registerFieldGetter</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">,</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="k">this</span><span class="p">.</span><span class="na">maxHealth</span><span class="p">);</span>
    <span class="n">registerFieldSetter</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">,</span> <span class="k">this</span><span class="p">::</span><span class="n">setMaximumHealthIfValid</span><span class="p">);</span>
    <span class="n">registerKeyValue</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">,</span> <span class="k">this</span><span class="p">::</span><span class="n">maxHealth</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Consumer</span></code> registered as field setter must perform the adequate checks to make sure the supplied value is valid.
This applies especially for <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/DataHolder.html">DataHolder</a>s which won't accept negative values. If a value is invalid, an
<code class="docutils literal notranslate"><span class="pre">IllegalArgumentException</span></code> should be thrown.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The validity criteria for those setters are the same as for the respective <code class="docutils literal notranslate"><span class="pre">Value</span></code> object, so you might delegate
the validity check to a call of <code class="docutils literal notranslate"><span class="pre">this.health().set()</span></code> and just set <code class="docutils literal notranslate"><span class="pre">this.health</span> <span class="pre">=</span> <span class="pre">value</span></code> if the first
line has not thrown an exception yet.</p>
</div>
<p>Itu dia, ' ' Datamanipulator ' ' harus dilakukan sekarang.</p>
</div>
</div>
<div class="section" id="implement-the-immutabledatamanipulator">
<h2>2. Terapkan ImmutableDataManipulator<a class="headerlink" href="#implement-the-immutabledatamanipulator" title="Link permanen untuk headline ini">Â¶</a></h2>
<p>Implementing the <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/manipulator/ImmutableDataManipulator.html">ImmutableDataManipulator</a> is similar to implementing the mutable one.</p>
<p>Satu-satunya perbedaan adalah:</p>
<ul class="simple">
<li>Nama kelas dibentuk oleh awalan nama <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code>s yang bisa dapat diubah dengan <code class="docutils literal notranslate"><span class="pre">ImmutableSponge</span></code></li>
<li>Mewarisi dari <code class="docutils literal notranslate"><span class="pre">ImmutableAbstractData</span></code> sebagai gantinya</li>
<li>Ganti dari <code class="docutils literal notranslate"><span class="pre">registerGettersAndSetters()</span></code>, metode ini disebut <code class="docutils literal notranslate"><span class="pre">registerGetters()</span></code></li>
</ul>
<p>When creating <code class="docutils literal notranslate"><span class="pre">ImmutableDataHolder</span></code>s or <code class="docutils literal notranslate"><span class="pre">ImmutableValue</span></code>s, check if it makes sense to use the
<code class="docutils literal notranslate"><span class="pre">ImmutableDataCachingUtil</span></code>. For example, if you have <code class="docutils literal notranslate"><span class="pre">WetData</span></code> which contains nothing more than a boolean, it
is more feasible to retain only two cached instances of <code class="docutils literal notranslate"><span class="pre">ImmutableWetData</span></code> - one for each possible value. For
manipulators and values with many possible values (like <code class="docutils literal notranslate"><span class="pre">SignData</span></code>) however, caching is proven to be too expensive.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Anda harus mendeklarasikan bagian dari <code class="docutils literal notranslate"><span class="pre">ImmutableDataManipulator</span></code> sebagai <code class="docutils literal notranslate"><span class="pre">final</span></code> untuk mencegah perubahan yang tidak disengaja.</p>
</div>
</div>
<div class="section" id="register-the-key-in-the-keyregistrymodule">
<h2>3. Register the Key in the KeyRegistryModule<a class="headerlink" href="#register-the-key-in-the-keyregistrymodule" title="Link permanen untuk headline ini">Â¶</a></h2>
<p>The next step is to register your <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/key/Key.html">Key</a>s to the <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/key/Keys.html">Keys</a>. To do so, locate the
<code class="docutils literal notranslate"><span class="pre">KeyRegistryModule</span></code> class and find the <code class="docutils literal notranslate"><span class="pre">registerDefaults()</span></code> method.
There add a line to register (and create) your used keys.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import static</span> <span class="nn">org.spongepowered.api.data.DataQuery.of</span><span class="p">;</span>

<span class="k">this</span><span class="p">.</span><span class="na">register</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span> <span class="n">Key</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
        <span class="p">.</span><span class="na">type</span><span class="p">(</span><span class="n">TypeTokens</span><span class="p">.</span><span class="na">BOUNDED_DOUBLE_VALUE_TOKEN</span><span class="p">)</span>
        <span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">name</span><span class="p">(</span><span class="s">&quot;Health&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">query</span><span class="p">(</span><span class="n">of</span><span class="p">(</span><span class="s">&quot;Health&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">build</span><span class="p">());</span>
<span class="k">this</span><span class="p">.</span><span class="na">register</span><span class="p">(</span><span class="s">&quot;max_health&quot;</span><span class="p">,</span> <span class="n">Key</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
        <span class="p">.</span><span class="na">type</span><span class="p">(</span><span class="n">TypeTokens</span><span class="p">.</span><span class="na">BOUNDED_DOUBLE_VALUE_TOKEN</span><span class="p">)</span>
        <span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;max_health&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">name</span><span class="p">(</span><span class="s">&quot;Max Health&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">query</span><span class="p">(</span><span class="n">of</span><span class="p">(</span><span class="s">&quot;MaxHealth&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">build</span><span class="p">());</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">register(Key)</span></code> method registers your <code class="docutils literal notranslate"><span class="pre">Key</span></code>s for later use. The string used for the id should be the
corresponding constant name from the <code class="docutils literal notranslate"><span class="pre">Keys</span></code> utility class in lowercase. The <code class="docutils literal notranslate"><span class="pre">Key</span></code> itself is created by using the
<a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/key/Key.Builder.html">Key.Builder</a> provided by the <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/key/Key.html#builder--">Key#builder()</a> method. You have to set a <code class="docutils literal notranslate"><span class="pre">TypeToken</span></code>, an <code class="docutils literal notranslate"><span class="pre">id</span></code>,
human readable <code class="docutils literal notranslate"><span class="pre">name</span></code> and a <code class="docutils literal notranslate"><span class="pre">DataQuery</span></code>.
The <code class="docutils literal notranslate"><span class="pre">DataQuery</span></code> is used for serialization. It is created from the statically imported <code class="docutils literal notranslate"><span class="pre">DataQuery.of()</span></code> method
accepting a string. This string should also be the constant name, stripped of underscores and capitalization changed to
upper camel case.</p>
</div>
<div class="section" id="implement-the-dataprocessors">
<h2>4. Terapkan DataProcessors<a class="headerlink" href="#implement-the-dataprocessors" title="Link permanen untuk headline ini">Â¶</a></h2>
<p>Berikutnya adalah <cite>DataProcessor</cite>. <cite>DataProcessor</cite> berfungsi sebagai jembatan antara kita <cite>DataManipulator</cite> dan Minecraft benda-benda. Setiap kali ada data yang diminta atau ditawarkan untuk <cite>DataHolders</cite> yang ada di Minecraft Vanilla, panggilan-panggilan itu berakhir menjadi didelegasikan ke <cite>DataProcessor</cite> atau <cite>ValueProcessor</cite>.</p>
<p>For your name, you should use the name of the <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> interface and append <code class="docutils literal notranslate"><span class="pre">Processor</span></code>. Thus, for
<code class="docutils literal notranslate"><span class="pre">HealthData</span></code> we create a <code class="docutils literal notranslate"><span class="pre">HealthDataProcessor</span></code>.</p>
<p>Dalam rangka untuk mengurangi kode boilerplate, <cite>DataProcessor</cite> harus mewarisi dari yang sesuai kelas abstrak dalam <cite>org.spongepowered.umum.data.prosesor.umum</cite> paket. Karena kesehatan hanya dapat hadir pada badan-badan tertentu, kita dapat menggunakan <cite>AbstractEntityDataProcessor</cite> yang khusus ditujukan pada <cite>Entitas</cite> yang didasarkan pada <cite>net.minecraft.entitas.Entitas</cite>. <cite>AbstractEntitySingleDataProcessor</cite> akan memerlukan waktu kurang pelaksanaan pekerjaan, tetapi tidak dapat digunakan sebagai <cite>HealthData</cite> berisi lebih dari satu nilai.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HealthDataProcessor</span>
        <span class="kd">extends</span> <span class="n">AbstractEntityDataProcessor</span><span class="o">&lt;</span><span class="n">EntityLivingBase</span><span class="p">,</span> <span class="n">HealthData</span><span class="p">,</span> <span class="n">ImmutableHealthData</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="nf">HealthDataProcessor</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">EntityLivingBase</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="o">[</span><span class="p">...</span><span class="o">]</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Tergantung pada abstraksi yang anda gunakan, metode yang anda harus menerapkan mungkin sangat berbeda, tergantung pada seberapa jauh pelaksanaan pekerjaan sudah bisa dilakukan di kelas abstrak. Umumnya, metode-metode yang dapat dikategorikan.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">It is possible to create multiple <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code>s for the same data. If vastly different <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code>s
should be supported (for example both a <code class="docutils literal notranslate"><span class="pre">TileEntity</span></code> and a matching <code class="docutils literal notranslate"><span class="pre">ItemStack</span></code>), it may be beneficial to
create one processor for each type of <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> in order to make full use of the provided abstractions.
Make sure you follow the package structure for items, tileentities and entities.</p>
</div>
<div class="section" id="validation-methods">
<h3>Metode validasi<a class="headerlink" href="#validation-methods" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>Always return a boolean value. If any of the <code class="docutils literal notranslate"><span class="pre">supports(target)</span></code> methods is called it should perform a general check if
the supplied target generally supports the kind of data handled by our <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code>. Based on your level of
abstraction you might not have to implement it at all, if you have to just implement the most specific one, as the more
generic ones usually delegate to them.</p>
<p>Untuk <code class="docutils literal notranslate"><span class="pre">HealthDataProcessor</span></code> kami <code class="docutils literal notranslate"><span class="pre">Support()</span></code> dijalankan oleh <code class="docutils literal notranslate"><span class="pre">AbstractEntityDataProcessor</span></code>. Per default, hal tersebut akan kembali benar jika argumen yang diberikan merupakan turunan dari kelas yang telah ditentukan saat memanggil <code class="docutils literal notranslate"><span class="pre">super()</span></code> konstruktor.</p>
<p>Sebagai gantinya, kita diminta untuk menyediakan metode <code class="docutils literal notranslate"><span class="pre">doesDataExist()</span></code>. Karena abstraksi tidak tahu bagaimana mendapatkan data, hal tersebut membiarkan fungsi ini dijalankan. Seperti nama nya, metode tersebut harus memeriksa apakah data sudah ada pada target yang didukung. Untuk <code class="docutils literal notranslate"><span class="pre">HealthDataProcessor</span></code>, hal ini selalu kembali benar, karena setiap entitas yang hidup selalu memiliki kesehatan.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">boolean</span> <span class="nf">doesDataExist</span><span class="p">(</span><span class="n">EntityLivingBase</span> <span class="n">entity</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="setter-methods">
<h3>Metode Pengaturan<a class="headerlink" href="#setter-methods" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>Metode pengaturan menerima <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> dari beberapa jenis dan beberapa data yang harus dijalankan padanya, jika memungkinkan.</p>
<p>Antarmuka <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> mendefinisikan sebuah <code class="docutils literal notranslate"><span class="pre">set()</span></code> metode menerima``DataHolder`` dan <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> yang mengembalikan <code class="docutils literal notranslate"><span class="pre">DataTransactionResult</span></code>. Bergantung pada kelas abstraksi yang digunakan, beberapa fungsi yang diperlukan mungkin sudah diterapkan.</p>
<p>Pada kasus ini, <code class="docutils literal notranslate"><span class="pre">AbstractEntitydataProcessor</span></code> mengurus sebagian besar proses dan hanya membutuhkan sebuah metode untuk mengeset sebagian nilai agar kembali <code class="docutils literal notranslate"><span class="pre">true</span></code> jika metode tersebut sukses dijalankan dan <code class="docutils literal notranslate"><span class="pre">false</span></code> jika tidak sukses. Semua pengecekan jika <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> mendukung <code class="docutils literal notranslate"><span class="pre">Data</span></code> akan ditangani, kelas abstrak hanya akan memberikan peta tiap <code class="docutils literal notranslate"><span class="pre">Key</span></code> dari <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> ke nilainya dan kemudian menyusun <code class="docutils literal notranslate"><span class="pre">DataTransactionResult</span></code> tergantung apakah operasi berhasi dijalankan atau tidak.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">boolean</span> <span class="nf">set</span><span class="p">(</span><span class="n">EntityLivingBase</span> <span class="n">entity</span><span class="p">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Key</span><span class="o">&lt;?&gt;</span><span class="p">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">keyValues</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">entity</span><span class="p">.</span><span class="na">getEntityAttribute</span><span class="p">(</span><span class="n">SharedMonsterAttributes</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">)</span>
            <span class="p">.</span><span class="na">setBaseValue</span><span class="p">(((</span><span class="n">Double</span><span class="p">)</span> <span class="n">keyValues</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">)).</span><span class="na">floatValue</span><span class="p">());</span>
    <span class="kt">float</span> <span class="n">health</span> <span class="o">=</span> <span class="p">((</span><span class="n">Double</span><span class="p">)</span> <span class="n">keyValues</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">)).</span><span class="na">floatValue</span><span class="p">();</span>
    <span class="n">entity</span><span class="p">.</span><span class="na">setHealth</span><span class="p">(</span><span class="n">health</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">To understand <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/DataTransactionResult.html">DataTransactionResult</a>s, check the <a class="reference internal" href="../../plugin/data/transactions.html"><span class="doc">corresponding docs page</span></a> and refer to the <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/DataTransactionResult.Builder.html">DataTransactionResult.Builder</a> docs to create one.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Peringatan</p>
<p class="last">Especially when working with <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/item/inventory/ItemStack.html">ItemStack</a>s it is likely that you will need to deal with
<code class="docutils literal notranslate"><span class="pre">NBTTagCompound</span></code>s directly. Many NBT keys are already defined as constants in the <code class="docutils literal notranslate"><span class="pre">NbtDataUtil</span></code> class.
If your required key is not there, you need to add it in order to avoid 'magic values' in the code.</p>
</div>
</div>
<div class="section" id="removal-method">
<h3>Metode penghapusan<a class="headerlink" href="#removal-method" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>Metode <code class="docutils literal notranslate"><span class="pre">remove()</span></code> mencoba untuk menghapus data dari <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> dan mengembalikan <code class="docutils literal notranslate"><span class="pre">DataTransactionResult</span></code>.</p>
<p>Removal is not abstracted in any abstract <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> as the abstractions have no way of knowing if the data
is always present on a compatible <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> (like <code class="docutils literal notranslate"><span class="pre">WetData</span></code> or <code class="docutils literal notranslate"><span class="pre">HealthData</span></code>) or if it may or may not be present
(like <code class="docutils literal notranslate"><span class="pre">LoreData</span></code>). If the data is always present, <code class="docutils literal notranslate"><span class="pre">remove()</span></code> must always fail. If it may or may not be present,
<code class="docutils literal notranslate"><span class="pre">remove()</span></code> should remove it.</p>
<p>Since a living entity <em>always</em> has health, <code class="docutils literal notranslate"><span class="pre">HealthData</span></code> is always present and removal therefore not supported.
Therefore we just return <a class="reference external" href="https://spongedl.neptunepowered.org/javadocs/7.2.0/org/spongepowered/api/data/DataTransactionResult.html#failNoData--">DataTransactionResult#failNoData()</a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">DataTransactionResult</span> <span class="nf">remove</span><span class="p">(</span><span class="n">DataHolder</span> <span class="n">dataHolder</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">DataTransactionResult</span><span class="p">.</span><span class="na">failNoData</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="getter-methods">
<h3>Metode Getter<a class="headerlink" href="#getter-methods" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>Metode getter mendapatkan data dari <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> dan mengembalikan``DataManipulator`` opsional. Antarmuka <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> menentukan metode <code class="docutils literal notranslate"><span class="pre">dari()</span></code> dan <code class="docutils literal notranslate"><span class="pre">createFrom()</span></code>, perbedaannya adalah bahwa <code class="docutils literal notranslate"><span class="pre">dari()</span></code> akan kembali <code class="docutils literal notranslate"><span class="pre">Opsional.empty()</span></code> jika dudukan data kompatibel, namun saat ini tidak berisi data, sementara <code class="docutils literal notranslate"><span class="pre">createFrom()</span></code> akan memberikan <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> memegang nilai bawaan dalam kasus itu.</p>
<p>Sekali lagi, <code class="docutils literal notranslate"><span class="pre">AbstractEntityDataProcessor</span></code> akan menyediakan sebagian besar pengerjaan untuk prosess ini dan hanya membutuhkan satu metode untuk mendapatkan nilai sebenarnya yang tersedia di <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code>. Metode ini hanya di butuhkan setelah <code class="docutils literal notranslate"><span class="pre">supports()</span></code> dan <code class="docutils literal notranslate"><span class="pre">doesDataExist()</span></code> keduanya telah kembali benar, artinya metode tersebut bekerja dengan anggapan bahwa data tersedia.</p>
<div class="admonition warning">
<p class="first admonition-title">Peringatan</p>
<p class="last">If the data may not always exist on the target <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code>, e.g. if the <code class="docutils literal notranslate"><span class="pre">remove()</span></code> function may be successful
(see above), it is imperative that you implement the <code class="docutils literal notranslate"><span class="pre">doesDataExist()</span></code> method so that it returns <code class="docutils literal notranslate"><span class="pre">true</span></code>
if the data is present and <code class="docutils literal notranslate"><span class="pre">false</span></code> if it is not.</p>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Key</span><span class="o">&lt;?&gt;</span><span class="p">,</span> <span class="o">?&gt;</span> <span class="n">getValues</span><span class="p">(</span><span class="n">EntityLivingBase</span> <span class="n">entity</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="kt">double</span> <span class="n">health</span> <span class="o">=</span> <span class="n">entity</span><span class="p">.</span><span class="na">getHealth</span><span class="p">();</span>
    <span class="kd">final</span> <span class="kt">double</span> <span class="n">maxHealth</span> <span class="o">=</span> <span class="n">entity</span><span class="p">.</span><span class="na">getMaxHealth</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">ImmutableMap</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">,</span> <span class="n">health</span><span class="p">,</span> <span class="n">Keys</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">,</span> <span class="n">maxHealth</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="filler-methods">
<h3>Metode penyaringan<a class="headerlink" href="#filler-methods" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>Metode pengisian berbeda dari metode getter ketika menerima <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> untuk diisi dengan nilai-nilai. Nilai-nilai tersebut bisa datang dari <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> atau harus diserialkan kembali dari <code class="docutils literal notranslate"><span class="pre">DataContainer</span></code>. Metode ini mengembalikan <code class="docutils literal notranslate"><span class="pre">Optional.empty()</span></code> jika <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code> tidak sesuai.</p>
<p><code class="docutils literal notranslate"><span class="pre">AbstractEntityDataProcessor</span></code> already handles filling from <code class="docutils literal notranslate"><span class="pre">DataHolders</span></code> by creating a <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code>
from the holder and then merging it with the supplied manipulator, but the <code class="docutils literal notranslate"><span class="pre">DataContainer</span></code> deserialization it
cannot provide.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">HealthData</span><span class="o">&gt;</span> <span class="nf">fill</span><span class="p">(</span><span class="n">DataContainer</span> <span class="n">container</span><span class="p">,</span> <span class="n">HealthData</span> <span class="n">healthData</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">container</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">.</span><span class="na">getQuery</span><span class="p">())</span> <span class="o">||</span> <span class="o">!</span><span class="n">container</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">.</span><span class="na">getQuery</span><span class="p">()))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Optional</span><span class="p">.</span><span class="na">empty</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">healthData</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">,</span> <span class="n">getData</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">Keys</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">));</span>
    <span class="n">healthData</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">,</span> <span class="n">getData</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">));</span>
    <span class="k">return</span> <span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">healthData</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">fill()</span></code> method is to return an <code class="docutils literal notranslate"><span class="pre">Optional</span></code> of the altered <code class="docutils literal notranslate"><span class="pre">healthData</span></code>, if and only if all required data could
be obtained from the <code class="docutils literal notranslate"><span class="pre">DataContainer</span></code>.</p>
</div>
<div class="section" id="other-methods">
<h3>Metode lain<a class="headerlink" href="#other-methods" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>Tergantung pada abstract superclass yang digunakan, beberapa metode lain mungkin akan di butuhkan. Sebagai contoh, <code class="docutils literal notranslate"><span class="pre">AbstractentityDataProcessor</span></code> perlu membuat <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> secara instan di beberapa titik. Hal ini tidak bisa di lakukan karena metode tersebut tidak mengetahui kelompok pelaksana juga tidak mengetahui konstruktor yang akan di gunakan. Oleh sebab itu metode ini akan menggunakan fungsi abstrak yang harus disediakan oleh pelaksana akhir. Hal ini hanya membuat <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> dengan data bawaan.</p>
<p>Jika anda menjalankan <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> anda sesuai dengan yang di rekomendasikan, anda hanya perlu menggunakan no-args konstruktor.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="n">HealthData</span> <span class="nf">createManipulator</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">SpongeHealthData</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="implement-the-valueprocessors">
<h2>5. Terapkan ValueProcessors<a class="headerlink" href="#implement-the-valueprocessors" title="Link permanen untuk headline ini">Â¶</a></h2>
<p>Tidak hanya <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> yang mungkin di tawarkan kepada <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code>, tetapi juga kelengkapan <code class="docutils literal notranslate"><span class="pre">Value</span></code> dengan sendiri nya. Untuk itu, anda harus menyediakan minimal satu <code class="docutils literal notranslate"><span class="pre">ValueProcessor</span></code> untuk setiap <code class="docutils literal notranslate"><span class="pre">Key</span></code> yang ada di <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> anda. Sebuah <code class="docutils literal notranslate"><span class="pre">ValueProcessor</span></code> dinamai mengikuti nama tetap setiap <code class="docutils literal notranslate"><span class="pre">Key</span></code> di dalam kelompok <code class="docutils literal notranslate"><span class="pre">Keys</span></code> dengan bentuk yang sama dengan <code class="docutils literal notranslate"><span class="pre">DataQuery</span></code>. Nama tetap tersebut dihilangkan garis bawah, digunakan dalam bentuk huruf besar dan di gabungkan dengan <code class="docutils literal notranslate"><span class="pre">ValueProcessor</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">ValueProcessor</span></code> harus selalu di ambil dari <code class="docutils literal notranslate"><span class="pre">AbstractSpongeValueProcessor</span></code>, yang akan memproses sebagian pengecekan <code class="docutils literal notranslate"><span class="pre">Support()</span></code> sesuai dengan jenis <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code>. Untuk <code class="docutils literal notranslate"><span class="pre">Key.HEALTH</span></code>, kita akan membuat dan mengkonstruk <code class="docutils literal notranslate"><span class="pre">HealthValueProcessor</span></code> sebagai berikut.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HealthValueProcessor</span>
        <span class="kd">extends</span> <span class="n">AbstractSpongeValueProcessor</span><span class="o">&lt;</span><span class="n">EntityLivingBase</span><span class="p">,</span> <span class="n">Double</span><span class="p">,</span> <span class="n">MutableBoundedValue</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;&gt;</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="nf">HealthValueProcessor</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">EntityLivingBase</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="o">[</span><span class="p">...</span><span class="o">]</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Sekarang <code class="docutils literal notranslate"><span class="pre">AbstractSpongeValueProcessor</span></code> akan menggantikan kita dari keharusan mengecek apakah nilai telah didukung. Hal ini akan di asumsikan telah didukung jika target <code class="docutils literal notranslate"><span class="pre">ValueContainer</span></code> adalah jenis <code class="docutils literal notranslate"><span class="pre">EntityLivingBase</span></code>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Untuk lebih memudahkan pengendalian terhadap objek <code class="docutils literal notranslate"><span class="pre">EntityLivingBase</span></code> yang telah didukung, metode <code class="docutils literal notranslate"><span class="pre">support(EntityLivingBase)</span></code> bisa diganti.</p>
</div>
<p>Sekali lagi, kebanyakan proses telah dilakukan oleh bagian abstraksi. Kita hanya perlu menjalankan dua metode pembantu untuk membuat <code class="docutils literal notranslate"><span class="pre">value</span></code> dan mitra tetapnya dan tiga metode untuk mendapatkan, mengatur dan menghapus data.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="n">MutableBoundedValue</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="nf">constructValue</span><span class="p">(</span><span class="n">Double</span> <span class="n">health</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">SpongeValueFactory</span><span class="p">.</span><span class="na">boundedBuilder</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">)</span>
        <span class="p">.</span><span class="na">minimum</span><span class="p">(</span><span class="mf">0D</span><span class="p">)</span>
        <span class="p">.</span><span class="na">maximum</span><span class="p">(((</span><span class="n">Float</span><span class="p">)</span> <span class="n">Float</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">).</span><span class="na">doubleValue</span><span class="p">())</span>
        <span class="p">.</span><span class="na">defaultValue</span><span class="p">(</span><span class="mi">20</span><span class="n">D</span><span class="p">)</span>
        <span class="p">.</span><span class="na">actualValue</span><span class="p">(</span><span class="n">health</span><span class="p">)</span>
        <span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="p">}</span>

<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="n">ImmutableBoundedValue</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="nf">constructImmutableValue</span><span class="p">(</span><span class="n">Double</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">constructValue</span><span class="p">(</span><span class="n">value</span><span class="p">).</span><span class="na">asImmutable</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="nf">getVal</span><span class="p">(</span><span class="n">EntityLivingBase</span> <span class="n">container</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">((</span><span class="kt">double</span><span class="p">)</span> <span class="n">container</span><span class="p">.</span><span class="na">getHealth</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Dikarenakan tidak mungkin sebuah <code class="docutils literal notranslate"><span class="pre">EntityLivingBase</span></code> tidak memiliki kesehatan, metode ini tidak akan pernah kembali ke <code class="docutils literal notranslate"><span class="pre">Optional.empty()</span></code>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">boolean</span> <span class="nf">set</span><span class="p">(</span><span class="n">EntityLivingBase</span> <span class="n">container</span><span class="p">,</span> <span class="n">Double</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="n">Float</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">container</span><span class="p">.</span><span class="na">setHealth</span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="na">floatValue</span><span class="p">());</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Metode <code class="docutils literal notranslate"><span class="pre">set()</span></code> akan mengembalikan nilai boolean yang akan mengindikasikan apakah nilai dapat berhasil diatur. Melakukan proses ini akan menolak nilai di luar batas-batas yang telah digunakan didalam metode konstruksi nilai kami di atas.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">DataTransactionResult</span> <span class="nf">removeFrom</span><span class="p">(</span><span class="n">ValueContainer</span><span class="o">&lt;?&gt;</span> <span class="n">container</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">DataTransactionResult</span><span class="p">.</span><span class="na">failNoData</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Karena data dijamin selalu hadirkan, usaha untuk menghapusnya selalu gagal.</p>
</div>
<div class="section" id="register-processors">
<h2>6. Daftar prosesor<a class="headerlink" href="#register-processors" title="Link permanen untuk headline ini">Â¶</a></h2>
<p>In order for Sponge to be able to use our manipulators and processors, we need to register them. This is done in the
<code class="docutils literal notranslate"><span class="pre">DataRegistrar</span></code> class. In the <code class="docutils literal notranslate"><span class="pre">setupSerialization()</span></code> method there are two large blocks of registrations to which we
add our processors.</p>
<div class="section" id="dataprocessors">
<h3>Dataprosesor<a class="headerlink" href="#dataprocessors" title="Link permanen untuk headline ini">Â¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> terdaftar bersama kelas penghubung dan pelaksana dari <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code> yang ditanganinya. Untuk setiap <code class="docutils literal notranslate"><span class="pre">DataManipulator</span></code>s yang tidak kekal/kekal minimal satu <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> harus terdaftar.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">DataUtil</span><span class="p">.</span><span class="na">registerDataProcessorAndImpl</span><span class="p">(</span><span class="n">HealthData</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">SpongeHealthData</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
        <span class="n">ImmutableHealthData</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">ImmutableSpongeHealthData</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
        <span class="k">new</span> <span class="n">HealthDataProcessor</span><span class="p">());</span>
</pre></div>
</div>
</div>
<div class="section" id="valueprocessors">
<h3>Nilaiprosesor<a class="headerlink" href="#valueprocessors" title="Link permanen untuk headline ini">Â¶</a></h3>
<p>Nilai prosesor terdaftar dibagian bawah dari fungsi yang sama. Untuk setiap <code class="docutils literal notranslate"><span class="pre">Key</span></code> beberapa prosesor bisa didaftarkan dengan beberapa panggilan dari metode <code class="docutils literal notranslate"><span class="pre">registeryValueProcessor()</span></code>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">DataUtil</span><span class="p">.</span><span class="na">registerValueProcessor</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">HEALTH</span><span class="p">,</span> <span class="k">new</span> <span class="n">HealthValueProcessor</span><span class="p">());</span>
<span class="n">DataUtil</span><span class="p">.</span><span class="na">registerValueProcessor</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">MAX_HEALTH</span><span class="p">,</span> <span class="k">new</span> <span class="n">MaxHealthValueProcessor</span><span class="p">());</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="implementing-block-data">
<h2>Melakukan data blok<a class="headerlink" href="#implementing-block-data" title="Link permanen untuk headline ini">Â¶</a></h2>
<p>Blok data berbeda-beda dari satu jenis dengan yang lain dimana hal tersebut di jalankan dengan mencampurkan blok tersebut dengan blok itu sendiri. Ada beberapa metode di <code class="docutils literal notranslate"><span class="pre">org.spongepowered.mixin.core.block.MixinBlock</span></code> yang harus diganti untuk menjalankan data untuk setiap blok.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Mixin</span><span class="p">(</span><span class="n">BlockHorizontal</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">MixinBlockHorizontal</span> <span class="kd">extends</span> <span class="n">MixinBlock</span> <span class="p">{</span>

    <span class="o">[</span><span class="p">...</span><span class="o">]</span>

<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">supports()</span></code> harus kembali <code class="docutils literal notranslate"><span class="pre">benar</span></code> jika baik penghubung <code class="docutils literal notranslate"><span class="pre">ImmutableDataManipulator</span></code> bisa dialihkan dari <code class="docutils literal notranslate"><span class="pre">Class</span></code> yang dilalui sebagai argumen, atau superkelas mendukungnya.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supports</span><span class="p">(</span><span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">ImmutableDataManipulator</span><span class="o">&lt;?</span><span class="p">,</span> <span class="o">?&gt;&gt;</span> <span class="n">immutable</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">super</span><span class="p">.</span><span class="na">supports</span><span class="p">(</span><span class="n">immutable</span><span class="p">)</span> <span class="o">||</span> <span class="n">ImmutableDirectionalData</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">isAssignableFrom</span><span class="p">(</span><span class="n">immutable</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">getStateWithData()</span></code> harus kembali baru <code class="docutils literal notranslate"><span class="pre">BlockState</span></code> dengan data dari <code class="docutils literal notranslate"><span class="pre">ImmutableDataManipulator</span></code> yang dijalankan untuk nya. Jika manipolator tidak didukung secara langsung, metode harus didelegasikan kepada superclass.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">BlockState</span><span class="o">&gt;</span> <span class="nf">getStateWithData</span><span class="p">(</span><span class="n">IBlockState</span> <span class="n">blockState</span><span class="p">,</span> <span class="n">ImmutableDataManipulator</span><span class="o">&lt;?</span><span class="p">,</span> <span class="o">?&gt;</span> <span class="n">manipulator</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">manipulator</span> <span class="k">instanceof</span> <span class="n">ImmutableDirectionalData</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">final</span> <span class="n">Direction</span> <span class="n">direction</span> <span class="o">=</span> <span class="p">((</span><span class="n">ImmutableDirectionalData</span><span class="p">)</span> <span class="n">manipulator</span><span class="p">).</span><span class="na">direction</span><span class="p">().</span><span class="na">get</span><span class="p">();</span>
        <span class="kd">final</span> <span class="n">EnumFacing</span> <span class="n">facing</span> <span class="o">=</span> <span class="n">DirectionResolver</span><span class="p">.</span><span class="na">getFor</span><span class="p">(</span><span class="n">direction</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">((</span><span class="n">BlockState</span><span class="p">)</span> <span class="n">blockState</span><span class="p">.</span><span class="na">withProperty</span><span class="p">(</span><span class="n">BlockHorizontal</span><span class="p">.</span><span class="na">FACING</span><span class="p">,</span> <span class="n">facing</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kd">super</span><span class="p">.</span><span class="na">getStateWithData</span><span class="p">(</span><span class="n">blockState</span><span class="p">,</span> <span class="n">manipulator</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">getStateWithValue()</span></code> sama dengan <code class="docutils literal notranslate"><span class="pre">get</span> <span class="pre">StateWithData()</span></code>, tetapi bekerja dengan satu <code class="docutils literal notranslate"><span class="pre">Key</span></code>s.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">BlockState</span><span class="o">&gt;</span> <span class="nf">getStateWithValue</span><span class="p">(</span><span class="n">IBlockState</span> <span class="n">blockState</span><span class="p">,</span> <span class="n">Key</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">BaseValue</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;&gt;</span> <span class="n">key</span><span class="p">,</span> <span class="n">E</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="na">DIRECTION</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">final</span> <span class="n">Direction</span> <span class="n">direction</span> <span class="o">=</span> <span class="p">(</span><span class="n">Direction</span><span class="p">)</span> <span class="n">value</span><span class="p">;</span>
        <span class="kd">final</span> <span class="n">EnumFacing</span> <span class="n">facing</span> <span class="o">=</span> <span class="n">DirectionResolver</span><span class="p">.</span><span class="na">getFor</span><span class="p">(</span><span class="n">direction</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">((</span><span class="n">BlockState</span><span class="p">)</span> <span class="n">blockState</span><span class="p">.</span><span class="na">withProperty</span><span class="p">(</span><span class="n">BlockHorizontal</span><span class="p">.</span><span class="na">FACING</span><span class="p">,</span> <span class="n">facing</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kd">super</span><span class="p">.</span><span class="na">getStateWithValue</span><span class="p">(</span><span class="n">blockState</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Pada akhirnya, <code class="docutils literal notranslate"><span class="pre">getManipulators()</span></code> harus mengembalikan dafter semua <code class="docutils literal notranslate"><span class="pre">immutableDataManipulator</span></code>s blok yang didukung, bersamaan dengan nial sekarang untuk disajikan <code class="docutils literal notranslate"><span class="pre">IBlockState</span></code>. Data tersebut harus mencakup semua <code class="docutils literal notranslate"><span class="pre">ImmutableDataManipulator</span></code>s yang berasal dari superclass.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">ImmutableDataManipulator</span><span class="o">&lt;?</span><span class="p">,</span> <span class="o">?&gt;&gt;</span> <span class="n">getManipulators</span><span class="p">(</span><span class="n">IBlockState</span> <span class="n">blockState</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">ImmutableList</span><span class="p">.</span><span class="o">&lt;</span><span class="n">ImmutableDataManipulator</span><span class="o">&lt;?</span><span class="p">,</span> <span class="o">?&gt;&gt;</span><span class="n">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="kd">super</span><span class="p">.</span><span class="na">getManipulators</span><span class="p">(</span><span class="n">blockState</span><span class="p">))</span>
            <span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">ImmutableSpongeDirectionalData</span><span class="p">(</span><span class="n">DirectionResolver</span><span class="p">.</span><span class="na">getFor</span><span class="p">(</span><span class="n">blockState</span><span class="p">.</span><span class="na">getValue</span><span class="p">(</span><span class="n">BlockHorizontal</span><span class="p">.</span><span class="na">FACING</span><span class="p">))))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="further-information">
<h2>Informasi lebih lanjut<a class="headerlink" href="#further-information" title="Link permanen untuk headline ini">Â¶</a></h2>
<p>Dengan <code class="docutils literal notranslate"><span class="pre">Data</span></code> yang merupakan konsep yang sedikit abstrak didalam Sponge, hal tersebut mempersulit untuk memberikan petunjuk umum tentang cara memperoleh data yang dibutuhkan dari kelas-kelas Minecraft itu sendiri. Mungkin akan membantu dengan memperhatikan prosesor yang serupa dengan yang anda kerjakan yang telah dijalankan untuk mendapatkan pemahaman yang lebih baik tentang bagaimana prosesor tersebut mestinya bekerja.</p>
<p>If you are stuck or are unsure about certain aspects, go visit the <code class="docutils literal notranslate"><span class="pre">#spongedev</span></code> IRC channel,
the <code class="docutils literal notranslate"><span class="pre">#dev</span></code> channel on Discord, the forums, or open up an Issue on GitHub.
Be sure to check the <a class="reference external" href="https://github.com/SpongePowered/SpongeCommon/issues/8">Data Processor Implementation Checklist</a>
for general contribution requirements.</p>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../spongedocs.html" class="btn btn-neutral float-right" title="Menulis SpongeDocs" accesskey="n" rel="next">Selanjutnya <span class="fa fa-angle-right"></span></a>
        <a href="mixins.html" class="btn btn-neutral" title="Mixin" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Sebelumnya</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../../_static/flags/id_ID.svg"
         alt="id" title="Indonesia">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/translations.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>