
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Практические рекомендации &mdash; Документация Sponge 7.2.0</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Алфавитный указатель"
              href="../../genindex.html"/>        <link rel="search" title="Поиск" href="../../search.html"/>    <link rel="top" title="Документация Sponge 7.2.0" href="../../index.html"/>        <link rel="up" title="Полезные советы" href="index.html"/>        <link rel="next" title="Ошибочные решения" href="bad.html"/>        <link rel="prev" title="Полезные советы" href="index.html"/>
    <!-- Google Analytics -->
    <script>
        (function(S,p,o,n,g,i,e){S['GoogleAnalyticsObject']=g;S[g]=S[g]||function(){
        (S[g].q=S[g].q||[]).push(arguments)},S[g].l=1*new Date();i=p.createElement(o),
        e=p.getElementsByTagName(o)[0];i.async=1;i.src=n;e.parentNode.insertBefore(i,e)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59476017-2', 'auto');
        ga('send', 'pageview');
    </script>

  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Создание сервера</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Versioning Policy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Подготовка к разработке</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Создание плагина</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">Версии API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Система сборки</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Подготовка рабочего пространства</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Настройка проекта</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Идентификаторы плагина</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Основной класс плагина</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Жизненный цикл плагина</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Внедрение зависимостей</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Полезные советы</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Практические рекомендации</a></li>
<li class="toctree-l3"><a class="reference internal" href="bad.html">Ошибочные решения</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Дополнительно</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Ведение логов (журналов) и отладка</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Текст</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Команды</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">События</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Настройка плагинов</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">API ресурсов</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">API данных</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Блоки</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Сущности</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Предметы</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Торговля</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Эффекты</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Планировщик</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Сервисы</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Базы данных</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Разрешения</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Баны</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Сбор данных</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Книга просмотров</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Экономика</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">Генерация мира</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Менеджер плагинов</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Игровой менеджер профилей</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Данные о вышедших игроках</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Таблисты</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Метаданные плагина</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Трассировка лучей</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Отладка плагина</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Учебные руководства</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/index.html">Implementation-dependent Plugins</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Документация Ore</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Участие в разработке Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">О проекте Sponge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Создание плагина</a> &raquo;</li>
          <li><a href="index.html">Полезные советы</a> &raquo;</li>
    <li>Практические рекомендации</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugin/practices/best.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="best-practices">
<h1>Практические рекомендации<a class="headerlink" href="#best-practices" title="Ссылка на этот заголовок">¶</a></h1>
<p>There are many ways to create a plugin, and many pitfalls for an unwary developer. Here we describe the plugin
development practices that will make the most of SpongeAPI, setting sensible boundaries for the benefit of
compatibility. This information may change and expand as the Sponge project matures.</p>
<div class="section" id="plugin-development-guidelines">
<h2>Руководство по разработке плагинов<a class="headerlink" href="#plugin-development-guidelines" title="Ссылка на этот заголовок">¶</a></h2>
<p>Следующие руководства были подготовлены для разработчиков плагинов Sponge. Это не конечный список, а попытка выделить некоторые вопросы, которые могут возникнуть во время разработки плагинов, и предложить наши лучшие решения.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Мы оставляем за собой право на использование <em>Sponge</em> в официальных продуктах SpongePowered. Используйте <em>Sponge</em> в названии плагина, только если: Ваш плагин на прямую связан с Minecraft-блоком «Губка», или/и у Вашего плагина есть версии с другими API (в этом случае добавляется «for Sponge» в название).</p>
</div>
<div class="section" id="economy-api">
<h3>API экономики<a class="headerlink" href="#economy-api" title="Ссылка на этот заголовок">¶</a></h3>
<p>Economy API используется для связи плагина экономики с другими плагинами, которые так или иначе используют экономику, например, магазины. Все, что вам нужно знать об этом API можно прочитать <span class="xref std std-doc">здесь</span>.</p>
</div>
<div class="section" id="packets">
<h3>Пакеты<a class="headerlink" href="#packets" title="Ссылка на этот заголовок">¶</a></h3>
<p>Anything to do with intercepting packets, or introducing custom items/blocks/entities/etc., is <em>not</em> planned to be part
of SpongeAPI. Note that using packets may be looking at the problem the wrong way, as there may be a solution
achievable with the existing SpongeAPI. In some cases, it may be possible to add whatever is needed to SpongeAPI;
otherwise, the alternative is to use the Forge API and create a Mod instead.</p>
</div>
<div class="section" id="using-forge-or-nms-classes">
<h3>Использование Forge или NMS классов<a class="headerlink" href="#using-forge-or-nms-classes" title="Ссылка на этот заголовок">¶</a></h3>
<p>We do not recommend working with Forge or Minecraft base classes at all, unless it is to provide compatibility with a
mod for SpongeAPI. Most uses of NMS (<code class="docutils literal notranslate"><span class="pre">net.minecraft.server</span></code>) code in plugins do not fail gracefully, making
troubleshooting very difficult. Maintaining NMS modifications is also more difficult than using SpongeAPI. Mods that
add to SpongeAPI using code internals will have to specifically write an API, which does not rely on underlying
Minecraft code, to be usable by Sponge plugins. However, plugins can be created that load separate “compatibility”
modules to interact with the underlying implementation (SpongeForge or SpongeVanilla).</p>
<p>Plugins using implementation-specific code are very likely to break between versions, and should be clearly labelled
as such wherever they are hosted. These may more appropriately labelled as «Mods».</p>
</div>
<div class="section" id="mixins">
<h3>Mixins<a class="headerlink" href="#mixins" title="Ссылка на этот заголовок">¶</a></h3>
<p>Mixins are specifically for transforming classes before other mods/plugins start. ForgeModLoader calls these mods
“Coremods”. SpongeForge is a Coremod, and deploys mixins on startup. Mixins can be used by plugins, but be aware of the
additional complexities involved.</p>
<p><strong>Hybrid Mods</strong></p>
<p>Sponge plugins which leverage mixins may also be a considered core mods, based on content.</p>
<ul class="simple">
<li>To use mixins in FML, it must be a coremod. The jar may also contain a Sponge plugin,
so most properly the container is a «hybrid mod».</li>
<li>To use mixins in SpongeVanilla, intentions must be declared in the manifest.
SpongeVanilla then injects the mixins.</li>
<li>Having both types in a single jar is entirely possible. (Indeed, a single jar could
easily contain a tweaker, FML mod, coremod, bukkit plugin, sponge plugin, and/or litemod.)</li>
</ul>
<p>Some definitions may be helpful here.</p>
<dl class="docutils">
<dt>Tweak Mod (aka Tweaker)</dt>
<dd>a subsystem-level mod which hooks directly into the game using LaunchWrapper, usually used for
ModSystems (e.g. LiteLoader, FML) and stand-alone mods (eg. Optifine). Can interact with any aspect
of the game environment directly. Generally breaks every version.</dd>
<dt>Core Mod</dt>
<dd>has almost equivalent power of a Tweak Mod but must be bootstrapped by a ModSystem.
Can interact with any aspect of the game environment directly. Generally breaks on every new Game version.</dd>
<dt>Мод</dt>
<dd>interacts with the game only via a ModSystem, the mod is exposed to game objects directly but will
generally only hook into the game via hooks provided by the ModSystem. Generally breaks every major
version of the Game (depending on features used). The term mod is also used as an umbrella term for
anything which modifies the game, though for the sake of clarity we’ll use this definition.</dd>
<dt>Плагин</dt>
<dd>interacts with the game only via an API, does not interact with game objects directly in any way,
only leverages objects exposed by the API. Generally breaks only when the API is revised
(and sometimes not even then).</dd>
</dl>
<p>It’s also important to distinguish the container from the contents. Issues with terminology tends to
arise because a jar containing a mod tends to get referred to as a «mod».
Any plugin which is not fully decoupled via the API puts itself into the category of Mod.
This type of «plugin» may be prevalent where there are shortcomings in an API.</p>
<p><strong>Advantages of Hybrid Mods</strong></p>
<p>A hybrid mod leverages both a plugin component which interacts via the API, and a mod (or even coremod)
in the same package. This has the disadvantages of a mod (breaks every version) but also the power of a
mod (can interact with the game directly) coupled with some of the benefits of a Plugin (high-level
abstract access to the game, and can also interact with other plugins as a peer).</p>
<p>The primary benefit of this system is that the maintenance burden is reduced when updating the mod,
because any features accessed via the API are likely to be much more stable.</p>
<p>This type of mod can be used to implement plugins whose needs overflow the capability of the API (in
the case of a plugin which needs to leverage mixins for a particular feature); but can also be used
for mods which want to leverage services afforded by the API (e.g. a mod which wants to provide direct
support for permissions or chat channels).</p>
<p>Unlike NMS-exploiting «plugins», a hybrid mod makes its nature clear.</p>
</div>
</div>
<div class="section" id="plugin-interoperability">
<h2>Plugin Interoperability<a class="headerlink" href="#plugin-interoperability" title="Ссылка на этот заголовок">¶</a></h2>
<p>An explanation of how to communicate with other plugins, <em>TBA</em>.</p>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="bad.html" class="btn btn-neutral float-right" title="Ошибочные решения" accesskey="n" rel="next">Далее <span class="fa fa-angle-right"></span></a>
        <a href="index.html" class="btn btn-neutral" title="Полезные советы" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Назад</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
    <img src="../../_static/flags/ru_RU.svg"
         alt="ru" title="Русский">
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/translations.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>